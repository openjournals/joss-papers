<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE article PUBLIC "-//NLM//DTD JATS (Z39.96) Journal Publishing DTD v1.2 20190208//EN"
                  "JATS-publishing1.dtd">
<article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="1.2" article-type="other">
<front>
<journal-meta>
<journal-id></journal-id>
<journal-title-group>
<journal-title>Journal of Open Source Software</journal-title>
<abbrev-journal-title>JOSS</abbrev-journal-title>
</journal-title-group>
<issn publication-format="electronic">2475-9066</issn>
<publisher>
<publisher-name>Open Journals</publisher-name>
</publisher>
</journal-meta>
<article-meta>
<article-id pub-id-type="publisher-id">5654</article-id>
<article-id pub-id-type="doi">10.21105/joss.05654</article-id>
<title-group>
<article-title>A Java Library for Itemset Mining with
Choco-solver</article-title>
</title-group>
<contrib-group>
<contrib contrib-type="author" corresp="yes">
<contrib-id contrib-id-type="orcid">https://orcid.org/0000-0002-2922-2833</contrib-id>
<name>
<surname>Vernerey</surname>
<given-names>Charles</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
<xref ref-type="corresp" rid="cor-1"><sup>*</sup></xref>
</contrib>
<contrib contrib-type="author">
<contrib-id contrib-id-type="orcid">https://orcid.org/0000-0001-6245-7661</contrib-id>
<name>
<surname>Loudni</surname>
<given-names>Samir</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
</contrib>
<aff id="aff-1">
<institution-wrap>
<institution>TASC, IMT-Atlantique, LS2N-CNRS, Nantes,
France</institution>
</institution-wrap>
</aff>
</contrib-group>
<author-notes>
<corresp id="cor-1">* E-mail: <email></email></corresp>
</author-notes>
<pub-date date-type="pub" publication-format="electronic" iso-8601-date="2023-07-02">
<day>2</day>
<month>7</month>
<year>2023</year>
</pub-date>
<volume>8</volume>
<issue>88</issue>
<fpage>5654</fpage>
<permissions>
<copyright-statement>Authors of papers retain copyright and release the
work under a Creative Commons Attribution 4.0 International License (CC
BY 4.0)</copyright-statement>
<copyright-year>2022</copyright-year>
<copyright-holder>The article authors</copyright-holder>
<license license-type="open-access" xlink:href="https://creativecommons.org/licenses/by/4.0/">
<license-p>Authors of papers retain copyright and release the work under
a Creative Commons Attribution 4.0 International License (CC BY
4.0)</license-p>
</license>
</permissions>
<kwd-group kwd-group-type="author">
<kwd>Java</kwd>
<kwd>Constraint Programming</kwd>
<kwd>Itemset Mining</kwd>
<kwd>Multi-Objective Optimisation</kwd>
</kwd-group>
</article-meta>
</front>
<body>
<sec id="summary">
  <title>Summary</title>
  <p>While traditional data mining techniques have been used extensively
  for discovering patterns in databases, they are not always suitable
  for incorporating user-specified constraints. To overcome this issue,
  new research has began connecting Data Mining to Constraint
  Programming (CP). Such fertilization leads to a flexible way to tackle
  data mining tasks, such as itemset or association rule mining. In this
  paper, we introduce a new library for solving itemset mining problems
  with Choco-solver.</p>
  <sec id="constraint-programming-cp">
    <title>Constraint Programming (CP)</title>
    <p>Constraint Programming (CP) is a powerful paradigm for solving
    combinatorial optimization problems
    (<xref alt="Rossi et al., 2006" rid="ref-rossi2006handbook" ref-type="bibr">Rossi
    et al., 2006</xref>). It provides a declarative approach to
    problem-solving by defining a set of variables, domains, and
    constraints that capture the problem’s requirements. CP solvers
    explore the space of possible solutions systematically, leveraging
    powerful search algorithms and constraint propagation techniques to
    efficiently find valid solutions. The flexibility of CP allows for
    modeling a wide range of problems, including scheduling
    (<xref alt="Baptiste et al., 2001" rid="ref-baptiste2001constraint" ref-type="bibr">Baptiste
    et al., 2001</xref>), resource allocation
    (<xref alt="Zhang et al., 2013" rid="ref-zhang2013constraint" ref-type="bibr">Zhang
    et al., 2013</xref>), and planning
    (<xref alt="Van Beek &amp; Chen, 1999" rid="ref-van1999cplan" ref-type="bibr">Van
    Beek &amp; Chen, 1999</xref>). Its ability to handle complex
    constraints, discrete variables, and global properties makes it
    particularly suitable for tackling real-world problems. CP has
    demonstrated remarkable success in various domains, offering a
    high-level modeling language and a diverse set of solving
    techniques. Its integration with other optimization methods and
    technologies further enhances its applicability and effectiveness.
    Overall, Constraint Programming is a valuable tool for addressing
    challenging optimization problems, offering a powerful approach to
    problem modeling, solving, and decision support.</p>
  </sec>
  <sec id="itemset-mining">
    <title>Itemset Mining</title>
    <p>Itemset mining is a fundamental data mining technique that aims
    to extract meaningful associations and patterns from large datasets
    (<xref alt="Fournier-Viger et al., 2017" rid="ref-fournier2017survey" ref-type="bibr">Fournier-Viger
    et al., 2017</xref>). It involves the identification of sets of
    items (called itemsets or patterns) that frequently co-occur or
    exhibit significant relationships. By uncovering these itemsets,
    researchers gain valuable insights into the underlying structure and
    dependencies within the data. Itemset mining finds applications in
    various domains, including market basket analysis
    (<xref alt="Agrawal et al., 1994" rid="ref-agrawal1994fast" ref-type="bibr">Agrawal
    et al., 1994</xref>), bioinformatics
    (<xref alt="Martinez et al., 2008" rid="ref-martinez2008genminer" ref-type="bibr">Martinez
    et al., 2008</xref>), and social network analysis
    (<xref alt="Erlandsson et al., 2016" rid="ref-erlandsson2016finding" ref-type="bibr">Erlandsson
    et al., 2016</xref>).</p>
  </sec>
  <sec id="cp-and-pattern-mining">
    <title>CP and Pattern Mining</title>
    <p>In recent years, CP has been proven to be effective for modelling
    and solving itemset mining problems
    (<xref alt="Guns et al., 2011" rid="ref-guns2011itemset" ref-type="bibr">Guns
    et al., 2011</xref>;
    <xref alt="Lazaar et al., 2016" rid="ref-lazaar2016global" ref-type="bibr">Lazaar
    et al., 2016</xref>;
    <xref alt="Ugarte et al., 2017" rid="ref-ugarte2017skypattern" ref-type="bibr">Ugarte
    et al., 2017</xref>), and sequence mining problems
    (<xref alt="Ghosh et al., 2022" rid="ref-Frontiers2022" ref-type="bibr">Ghosh
    et al., 2022</xref>;
    <xref alt="Kadıoğlu et al., 2023" rid="ref-aaai12081" ref-type="bibr">Kadıoğlu
    et al., 2023</xref>;
    <xref alt="Wang et al., 2022" rid="ref-seq2pat2022" ref-type="bibr">Wang
    et al., 2022</xref>;
    <xref alt="Wang &amp; Kadıoğlu, 2022" rid="ref-DPM2022" ref-type="bibr">Wang
    &amp; Kadıoğlu, 2022</xref>). The main advantage of using CP rather
    than specialised approaches for solving pattern mining problems is
    that the user can easily add custom constraints without having to
    modify the underlying system. Multiple user-specified constraints
    have been proposed in the literature to model and solve several
    pattern mining problems.</p>
  </sec>
</sec>
<sec id="statement-of-need">
  <title>Statement of need</title>
  <p>Having a generic prototypical approach that can be parameterized to
  declaratively and efficiently discover patterns of interest using the
  available constraint solving tools is crucial to promote the use of CP
  for itemset mining. Multiple constraints designed for different mining
  tasks have been proposed in the recent years. However, few
  alternatives exist that bring all of these constraints together in the
  same place. A user interested by using constraints in their own
  project would have to implement them from scratch, which takes time
  and may lead to bugs. To alleviate the burden of the user, we propose
  a new CP library that gathers multiple reference constraints for
  itemset mining in the same place.</p>
</sec>
<sec id="features-and-functionality">
  <title>Features and Functionality</title>
  <fig>
    <caption><p>Summary of constraints implemented with Choco-Mining
    <styled-content id="figU003Aapp"></styled-content></p></caption>
    <graphic mimetype="image" mime-subtype="svg+xml" xlink:href="media/app.svg" />
  </fig>
  <p>We propose a new CP library called <bold>Choco-Mining</bold> that
  is based on Choco-solver
  (<xref alt="Prud’homme &amp; Fages, 2022" rid="ref-prud2022choco" ref-type="bibr">Prud’homme
  &amp; Fages, 2022</xref>). The architecture of the library is
  illustrated in
  <xref alt="[fig:app]" rid="figU003Aapp">[fig:app]</xref>. As we can
  see, multiple constraints dedicated to different itemset mining tasks
  are available in the Choco-Mining library. Each constraint takes as
  input a transactional database <inline-formula><alternatives>
  <tex-math><![CDATA[D]]></tex-math>
  <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>D</mml:mi></mml:math></alternatives></inline-formula>
  and a vector of Boolean variables <inline-formula><alternatives>
  <tex-math><![CDATA[x]]></tex-math>
  <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>x</mml:mi></mml:math></alternatives></inline-formula>
  used for representing itemsets, where <inline-formula><alternatives>
  <tex-math><![CDATA[x[i]]]></tex-math>
  <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>x</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">[</mml:mo><mml:mi>i</mml:mi><mml:mo stretchy="true" form="postfix">]</mml:mo></mml:mrow></mml:mrow></mml:math></alternatives></inline-formula>
  represents the presence/absence of the item
  <inline-formula><alternatives>
  <tex-math><![CDATA[i]]></tex-math>
  <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>i</mml:mi></mml:math></alternatives></inline-formula>
  in the searched itemset. These constraints are then used to define the
  problem at hand in terms of constraint programming. The following
  constraints are available in Choco-Mining:</p>
  <list list-type="bullet">
    <list-item>
      <p><inline-formula><alternatives>
      <tex-math><![CDATA[CoverSize_{D}(x,f)]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>C</mml:mi><mml:mi>o</mml:mi><mml:mi>v</mml:mi><mml:mi>e</mml:mi><mml:mi>r</mml:mi><mml:mi>S</mml:mi><mml:mi>i</mml:mi><mml:mi>z</mml:mi><mml:msub><mml:mi>e</mml:mi><mml:mi>D</mml:mi></mml:msub><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>x</mml:mi><mml:mo>,</mml:mo><mml:mi>f</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow></mml:mrow></mml:math></alternatives></inline-formula>
      (<xref alt="Schaus et al., 2017" rid="ref-SchausAG17" ref-type="bibr">Schaus
      et al., 2017</xref>): Given an integer variable
      <inline-formula><alternatives>
      <tex-math><![CDATA[f]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>f</mml:mi></mml:math></alternatives></inline-formula>
      that represents the frequency (noted
      <inline-formula><alternatives>
      <tex-math><![CDATA[freq]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>f</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi></mml:mrow></mml:math></alternatives></inline-formula>)
      of an itemset <inline-formula><alternatives>
      <tex-math><![CDATA[x]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>x</mml:mi></mml:math></alternatives></inline-formula>,
      the constraint ensures that <inline-formula><alternatives>
      <tex-math><![CDATA[f = freq(x)]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>f</mml:mi><mml:mo>=</mml:mo><mml:mi>f</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>x</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow></mml:mrow></mml:math></alternatives></inline-formula>.</p>
    </list-item>
    <list-item>
      <p><inline-formula><alternatives>
      <tex-math><![CDATA[CoverClosure_{D}(x)]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>C</mml:mi><mml:mi>o</mml:mi><mml:mi>v</mml:mi><mml:mi>e</mml:mi><mml:mi>r</mml:mi><mml:mi>C</mml:mi><mml:mi>l</mml:mi><mml:mi>o</mml:mi><mml:mi>s</mml:mi><mml:mi>u</mml:mi><mml:mi>r</mml:mi><mml:msub><mml:mi>e</mml:mi><mml:mi>D</mml:mi></mml:msub><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>x</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow></mml:mrow></mml:math></alternatives></inline-formula>
      (<xref alt="Schaus et al., 2017" rid="ref-SchausAG17" ref-type="bibr">Schaus
      et al., 2017</xref>): The constraint ensures that
      <inline-formula><alternatives>
      <tex-math><![CDATA[x]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>x</mml:mi></mml:math></alternatives></inline-formula>
      is closed w.r.t. the frequency, i.e.,
      <inline-formula><alternatives>
      <tex-math><![CDATA[\nexists ~y \supset x: freq(x) = freq(y)]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>∄</mml:mi><mml:mspace width="0.222em"></mml:mspace><mml:mi>y</mml:mi><mml:mo>⊃</mml:mo><mml:mi>x</mml:mi><mml:mo>:</mml:mo><mml:mi>f</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>x</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow><mml:mo>=</mml:mo><mml:mi>f</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>y</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow></mml:mrow></mml:math></alternatives></inline-formula>.</p>
    </list-item>
    <list-item>
      <p><inline-formula><alternatives>
      <tex-math><![CDATA[AdequateClosure_{D,M}(x)]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>A</mml:mi><mml:mi>d</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mi>u</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi><mml:mi>e</mml:mi><mml:mi>C</mml:mi><mml:mi>l</mml:mi><mml:mi>o</mml:mi><mml:mi>s</mml:mi><mml:mi>u</mml:mi><mml:mi>r</mml:mi><mml:msub><mml:mi>e</mml:mi><mml:mrow><mml:mi>D</mml:mi><mml:mo>,</mml:mo><mml:mi>M</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>x</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow></mml:mrow></mml:math></alternatives></inline-formula>
      (<xref alt="Vernerey et al., 2022" rid="ref-ijcai2022p0261" ref-type="bibr">Vernerey
      et al., 2022</xref>): Given a set of measures
      <inline-formula><alternatives>
      <tex-math><![CDATA[M]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>M</mml:mi></mml:math></alternatives></inline-formula>,
      the constraint ensures that <inline-formula><alternatives>
      <tex-math><![CDATA[x]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>x</mml:mi></mml:math></alternatives></inline-formula>
      is closed w.r.t. <inline-formula><alternatives>
      <tex-math><![CDATA[M]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>M</mml:mi></mml:math></alternatives></inline-formula>,
      i.e., <inline-formula><alternatives>
      <tex-math><![CDATA[\nexists~ y \supset x]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>∄</mml:mi><mml:mspace width="0.222em"></mml:mspace><mml:mi>y</mml:mi><mml:mo>⊃</mml:mo><mml:mi>x</mml:mi></mml:mrow></mml:math></alternatives></inline-formula>
      such that for all <inline-formula><alternatives>
      <tex-math><![CDATA[m \in M : m(x) = m(y)]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>m</mml:mi><mml:mo>∈</mml:mo><mml:mi>M</mml:mi><mml:mo>:</mml:mo><mml:mi>m</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>x</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow><mml:mo>=</mml:mo><mml:mi>m</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>y</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow></mml:mrow></mml:math></alternatives></inline-formula>.</p>
    </list-item>
    <list-item>
      <p><inline-formula><alternatives>
      <tex-math><![CDATA[FrequentSubs_{D,s}(x)]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>F</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mi>u</mml:mi><mml:mi>e</mml:mi><mml:mi>n</mml:mi><mml:mi>t</mml:mi><mml:mi>S</mml:mi><mml:mi>u</mml:mi><mml:mi>b</mml:mi><mml:msub><mml:mi>s</mml:mi><mml:mrow><mml:mi>D</mml:mi><mml:mo>,</mml:mo><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>x</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow></mml:mrow></mml:math></alternatives></inline-formula>
      (<xref alt="M. Belaid et al., 2019" rid="ref-Belaid2BL19" ref-type="bibr">M.
      Belaid et al., 2019</xref>): Given a frequency threshold
      <inline-formula><alternatives>
      <tex-math><![CDATA[s]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>s</mml:mi></mml:math></alternatives></inline-formula>,
      the constraint ensures that all the subsets of
      <inline-formula><alternatives>
      <tex-math><![CDATA[x]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>x</mml:mi></mml:math></alternatives></inline-formula>
      are frequent, i.e., <inline-formula><alternatives>
      <tex-math><![CDATA[\forall y \subset x : freq(y) \ge s]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mo>∀</mml:mo><mml:mi>y</mml:mi><mml:mo>⊂</mml:mo><mml:mi>x</mml:mi><mml:mo>:</mml:mo><mml:mi>f</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>y</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow><mml:mo>≥</mml:mo><mml:mi>s</mml:mi></mml:mrow></mml:math></alternatives></inline-formula>.</p>
    </list-item>
    <list-item>
      <p><inline-formula><alternatives>
      <tex-math><![CDATA[InfrequentSupers_{D,s}(x)]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>I</mml:mi><mml:mi>n</mml:mi><mml:mi>f</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mi>u</mml:mi><mml:mi>e</mml:mi><mml:mi>n</mml:mi><mml:mi>t</mml:mi><mml:mi>S</mml:mi><mml:mi>u</mml:mi><mml:mi>p</mml:mi><mml:mi>e</mml:mi><mml:mi>r</mml:mi><mml:msub><mml:mi>s</mml:mi><mml:mrow><mml:mi>D</mml:mi><mml:mo>,</mml:mo><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>x</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow></mml:mrow></mml:math></alternatives></inline-formula>
      (<xref alt="M. Belaid et al., 2019" rid="ref-Belaid2BL19" ref-type="bibr">M.
      Belaid et al., 2019</xref>): Given a frequency threshold
      <inline-formula><alternatives>
      <tex-math><![CDATA[s]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>s</mml:mi></mml:math></alternatives></inline-formula>,
      the constraint ensures that all the supersets of
      <inline-formula><alternatives>
      <tex-math><![CDATA[x]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>x</mml:mi></mml:math></alternatives></inline-formula>
      are infrequent, i.e., <inline-formula><alternatives>
      <tex-math><![CDATA[\forall y \supset x : freq(y) < s]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mo>∀</mml:mo><mml:mi>y</mml:mi><mml:mo>⊃</mml:mo><mml:mi>x</mml:mi><mml:mo>:</mml:mo><mml:mi>f</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>y</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow><mml:mo>&lt;</mml:mo><mml:mi>s</mml:mi></mml:mrow></mml:math></alternatives></inline-formula>.</p>
    </list-item>
    <list-item>
      <p><inline-formula><alternatives>
      <tex-math><![CDATA[Generator_{D}(x)]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>G</mml:mi><mml:mi>e</mml:mi><mml:mi>n</mml:mi><mml:mi>e</mml:mi><mml:mi>r</mml:mi><mml:mi>a</mml:mi><mml:mi>t</mml:mi><mml:mi>o</mml:mi><mml:msub><mml:mi>r</mml:mi><mml:mi>D</mml:mi></mml:msub><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>x</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow></mml:mrow></mml:math></alternatives></inline-formula>
      (<xref alt="M.-B. Belaid et al., 2019" rid="ref-BelaidBL19" ref-type="bibr">M.-B.
      Belaid et al., 2019</xref>): The constraint ensures that
      <inline-formula><alternatives>
      <tex-math><![CDATA[x]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>x</mml:mi></mml:math></alternatives></inline-formula>
      is a generator, i.e., <inline-formula><alternatives>
      <tex-math><![CDATA[\nexists ~y \subset x : freq(y) = freq(x)]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>∄</mml:mi><mml:mspace width="0.222em"></mml:mspace><mml:mi>y</mml:mi><mml:mo>⊂</mml:mo><mml:mi>x</mml:mi><mml:mo>:</mml:mo><mml:mi>f</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>y</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow><mml:mo>=</mml:mo><mml:mi>f</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>x</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow></mml:mrow></mml:math></alternatives></inline-formula>.</p>
    </list-item>
    <list-item>
      <p><inline-formula><alternatives>
      <tex-math><![CDATA[ClosedDiversity_{D,\mathcal{H},j,s}(x)]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>C</mml:mi><mml:mi>l</mml:mi><mml:mi>o</mml:mi><mml:mi>s</mml:mi><mml:mi>e</mml:mi><mml:mi>d</mml:mi><mml:mi>D</mml:mi><mml:mi>i</mml:mi><mml:mi>v</mml:mi><mml:mi>e</mml:mi><mml:mi>r</mml:mi><mml:mi>s</mml:mi><mml:mi>i</mml:mi><mml:mi>t</mml:mi><mml:msub><mml:mi>y</mml:mi><mml:mrow><mml:mi>D</mml:mi><mml:mo>,</mml:mo><mml:mi>ℋ</mml:mi><mml:mo>,</mml:mo><mml:mi>j</mml:mi><mml:mo>,</mml:mo><mml:mi>s</mml:mi></mml:mrow></mml:msub><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>x</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow></mml:mrow></mml:math></alternatives></inline-formula>
      (<xref alt="Hien et al., 2020" rid="ref-HienLALLOZ20" ref-type="bibr">Hien
      et al., 2020</xref>): Given a history of itemsets
      <inline-formula><alternatives>
      <tex-math><![CDATA[\mathcal{H}]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>ℋ</mml:mi></mml:math></alternatives></inline-formula>,
      a diversity threshold <inline-formula><alternatives>
      <tex-math><![CDATA[j]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>j</mml:mi></mml:math></alternatives></inline-formula>
      and a minimum frequency threshold <inline-formula><alternatives>
      <tex-math><![CDATA[s]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>s</mml:mi></mml:math></alternatives></inline-formula>,
      the constraint ensures that <inline-formula><alternatives>
      <tex-math><![CDATA[x]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>x</mml:mi></mml:math></alternatives></inline-formula>
      is a diverse itemset (i.e., <inline-formula><alternatives>
      <tex-math><![CDATA[\nexists ~y \in \mathcal{H} : jaccard(x,y) \ge j]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>∄</mml:mi><mml:mspace width="0.222em"></mml:mspace><mml:mi>y</mml:mi><mml:mo>∈</mml:mo><mml:mi>ℋ</mml:mi><mml:mo>:</mml:mo><mml:mi>j</mml:mi><mml:mi>a</mml:mi><mml:mi>c</mml:mi><mml:mi>c</mml:mi><mml:mi>a</mml:mi><mml:mi>r</mml:mi><mml:mi>d</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>x</mml:mi><mml:mo>,</mml:mo><mml:mi>y</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow><mml:mo>≥</mml:mo><mml:mi>j</mml:mi></mml:mrow></mml:math></alternatives></inline-formula>),
      <inline-formula><alternatives>
      <tex-math><![CDATA[x]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>x</mml:mi></mml:math></alternatives></inline-formula>
      is closed w.r.t. the frequency and <inline-formula><alternatives>
      <tex-math><![CDATA[freq(x) \ge s]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>f</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>x</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow><mml:mo>≥</mml:mo><mml:mi>s</mml:mi></mml:mrow></mml:math></alternatives></inline-formula>.</p>
    </list-item>
  </list>
  <p>We can model different problems using these constraints.
  <xref alt="[fig:app]" rid="figU003Aapp">[fig:app]</xref> shows
  examples of mining tasks (in blue) with the constraints (in red)
  involved in their modelling:</p>
  <list list-type="bullet">
    <list-item>
      <p>Frequent Itemset Mining: Given a threshold
      <inline-formula><alternatives>
      <tex-math><![CDATA[s]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>s</mml:mi></mml:math></alternatives></inline-formula>,
      find all the itemsets <inline-formula><alternatives>
      <tex-math><![CDATA[x]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>x</mml:mi></mml:math></alternatives></inline-formula>
      such that <inline-formula><alternatives>
      <tex-math><![CDATA[freq(x) \ge s]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>f</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>x</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow><mml:mo>≥</mml:mo><mml:mi>s</mml:mi></mml:mrow></mml:math></alternatives></inline-formula>.</p>
    </list-item>
    <list-item>
      <p>Closed Itemset Mining: Given a threshold
      <inline-formula><alternatives>
      <tex-math><![CDATA[s]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>s</mml:mi></mml:math></alternatives></inline-formula>,
      find all the itemsets <inline-formula><alternatives>
      <tex-math><![CDATA[x]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>x</mml:mi></mml:math></alternatives></inline-formula>
      such that <inline-formula><alternatives>
      <tex-math><![CDATA[freq(x) \ge s]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>f</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>x</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow><mml:mo>≥</mml:mo><mml:mi>s</mml:mi></mml:mrow></mml:math></alternatives></inline-formula>
      and <inline-formula><alternatives>
      <tex-math><![CDATA[\nexists ~y \supset x : freq(x) = freq(y)]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>∄</mml:mi><mml:mspace width="0.222em"></mml:mspace><mml:mi>y</mml:mi><mml:mo>⊃</mml:mo><mml:mi>x</mml:mi><mml:mo>:</mml:mo><mml:mi>f</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>x</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow><mml:mo>=</mml:mo><mml:mi>f</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>y</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow></mml:mrow></mml:math></alternatives></inline-formula>.</p>
    </list-item>
    <list-item>
      <p>Skypattern Mining: Given a set of measures
      <inline-formula><alternatives>
      <tex-math><![CDATA[M]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>M</mml:mi></mml:math></alternatives></inline-formula>,
      find all the itemsets <inline-formula><alternatives>
      <tex-math><![CDATA[x]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>x</mml:mi></mml:math></alternatives></inline-formula>
      such that there exists no other itemset
      <inline-formula><alternatives>
      <tex-math><![CDATA[y]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>y</mml:mi></mml:math></alternatives></inline-formula>
      that dominates <inline-formula><alternatives>
      <tex-math><![CDATA[x]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>x</mml:mi></mml:math></alternatives></inline-formula>.
      We say that <inline-formula><alternatives>
      <tex-math><![CDATA[y]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>y</mml:mi></mml:math></alternatives></inline-formula>
      dominates <inline-formula><alternatives>
      <tex-math><![CDATA[x]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>x</mml:mi></mml:math></alternatives></inline-formula>
      iff <inline-formula><alternatives>
      <tex-math><![CDATA[\forall ~m \in M : m(y) \ge m(x)]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mo>∀</mml:mo><mml:mspace width="0.222em"></mml:mspace><mml:mi>m</mml:mi><mml:mo>∈</mml:mo><mml:mi>M</mml:mi><mml:mo>:</mml:mo><mml:mi>m</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>y</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow><mml:mo>≥</mml:mo><mml:mi>m</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>x</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow></mml:mrow></mml:math></alternatives></inline-formula>
      and <inline-formula><alternatives>
      <tex-math><![CDATA[\exists ~m \in M : m(y) > m(x)]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mo>∃</mml:mo><mml:mspace width="0.222em"></mml:mspace><mml:mi>m</mml:mi><mml:mo>∈</mml:mo><mml:mi>M</mml:mi><mml:mo>:</mml:mo><mml:mi>m</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>y</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow><mml:mo>&gt;</mml:mo><mml:mi>m</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>x</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow></mml:mrow></mml:math></alternatives></inline-formula>.</p>
    </list-item>
    <list-item>
      <p>Maximal Frequent Itemset Mining: Given a threshold
      <inline-formula><alternatives>
      <tex-math><![CDATA[s]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>s</mml:mi></mml:math></alternatives></inline-formula>,
      find all the itemsets <inline-formula><alternatives>
      <tex-math><![CDATA[x]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>x</mml:mi></mml:math></alternatives></inline-formula>
      such that <inline-formula><alternatives>
      <tex-math><![CDATA[freq(x) \ge s]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>f</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>x</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow><mml:mo>≥</mml:mo><mml:mi>s</mml:mi></mml:mrow></mml:math></alternatives></inline-formula>
      and <inline-formula><alternatives>
      <tex-math><![CDATA[\forall ~y \supset x : freq(y) < s]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mo>∀</mml:mo><mml:mspace width="0.222em"></mml:mspace><mml:mi>y</mml:mi><mml:mo>⊃</mml:mo><mml:mi>x</mml:mi><mml:mo>:</mml:mo><mml:mi>f</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>y</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow><mml:mo>&lt;</mml:mo><mml:mi>s</mml:mi></mml:mrow></mml:math></alternatives></inline-formula>.</p>
    </list-item>
    <list-item>
      <p>Minimal Infrequent Itemset Mining: Given a threshold
      <inline-formula><alternatives>
      <tex-math><![CDATA[s]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>s</mml:mi></mml:math></alternatives></inline-formula>,
      find all the itemsets <inline-formula><alternatives>
      <tex-math><![CDATA[x]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>x</mml:mi></mml:math></alternatives></inline-formula>
      such that <inline-formula><alternatives>
      <tex-math><![CDATA[freq(x) < s]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>f</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>x</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow><mml:mo>&lt;</mml:mo><mml:mi>s</mml:mi></mml:mrow></mml:math></alternatives></inline-formula>
      and <inline-formula><alternatives>
      <tex-math><![CDATA[\forall ~y \subset x : freq(y) \ge s]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mo>∀</mml:mo><mml:mspace width="0.222em"></mml:mspace><mml:mi>y</mml:mi><mml:mo>⊂</mml:mo><mml:mi>x</mml:mi><mml:mo>:</mml:mo><mml:mi>f</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>y</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow><mml:mo>≥</mml:mo><mml:mi>s</mml:mi></mml:mrow></mml:math></alternatives></inline-formula>.</p>
    </list-item>
    <list-item>
      <p>Generator Mining: Find all the itemsets
      <inline-formula><alternatives>
      <tex-math><![CDATA[x]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>x</mml:mi></mml:math></alternatives></inline-formula>
      such that <inline-formula><alternatives>
      <tex-math><![CDATA[\nexists ~y \subset x : freq(y) = freq(x)]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>∄</mml:mi><mml:mspace width="0.222em"></mml:mspace><mml:mi>y</mml:mi><mml:mo>⊂</mml:mo><mml:mi>x</mml:mi><mml:mo>:</mml:mo><mml:mi>f</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>y</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow><mml:mo>=</mml:mo><mml:mi>f</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>x</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow></mml:mrow></mml:math></alternatives></inline-formula>.</p>
    </list-item>
    <list-item>
      <p>Association Rule Mining: Find all the association rules
      <inline-formula><alternatives>
      <tex-math><![CDATA[x \Rightarrow y]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>x</mml:mi><mml:mo>⇒</mml:mo><mml:mi>y</mml:mi></mml:mrow></mml:math></alternatives></inline-formula>
      that respect the constraints specified by the user.</p>
    </list-item>
    <list-item>
      <p>Diverse Itemset Mining: Given a diversity threshold
      <inline-formula><alternatives>
      <tex-math><![CDATA[j]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>j</mml:mi></mml:math></alternatives></inline-formula>
      and a minimum frequency threshold <inline-formula><alternatives>
      <tex-math><![CDATA[s]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>s</mml:mi></mml:math></alternatives></inline-formula>,
      find all the diverse itemsets that are closed w.r.t. the frequency
      and such that <inline-formula><alternatives>
      <tex-math><![CDATA[freq(x) \ge s]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>f</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>x</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow><mml:mo>≥</mml:mo><mml:mi>s</mml:mi></mml:mrow></mml:math></alternatives></inline-formula>.</p>
    </list-item>
  </list>
</sec>
<sec id="running-example">
  <title>Running example</title>
  <p>We give below an example of CP encoding for the Closed Itemset
  Mining problem using our library Choco-Mining.</p>
  <code language="java">// Read the transactional database
TransactionalDatabase database = new DatReader(&quot;data/contextPasquier99.dat&quot;).read();
// Create the Choco model
Model model = new Model(&quot;Closed Itemset Mining&quot;);
/* Array of Boolean variables where x[i] == 1 represents
the fact that i belongs to the itemset */
BoolVar[] x = model.boolVarArray(&quot;x&quot;, database.getNbItems());
/* Integer variable that represents the frequency of x 
with the bounds [1, nbTransactions] */
IntVar freq = model.intVar(&quot;freq&quot;, 1, database.getNbTransactions());
// Integer variable that represents the length of x with the bounds [1, nbItems]
IntVar length = model.intVar(&quot;length&quot;, 1, database.getNbItems());
// Ensures that length = sum(x)
model.sum(x, &quot;=&quot;, length).post();
// Ensures that freq = frequency(x)
ConstraintFactory.coverSize(database, freq, x).post();
// Ensures that x is a closed itemset
ConstraintFactory.coverClosure(database, x).post();
Solver solver = model.getSolver();
// Variable heuristic : select item i such that freq(x U i) is minimal
// Value heuristic : instantiate it first to 0
solver.setSearch(Search.intVarSearch(
        new MinCov(model, database),
        new IntDomainMin(),
        x
));
// Create a list to store all the closed itemsets
List&lt;Pattern&gt; closedPatterns = new LinkedList&lt;&gt;();
while (solver.solve()) {
    int[] itemset = IntStream.range(0, x.length)
            .filter(i -&gt; x[i].getValue() == 1)
            .map(i -&gt; database.getItems()[i])
            .toArray();
    // Add the closed itemset with its frequency to the list
    closedPatterns.add(new Pattern(itemset, new int[]{freq.getValue()}));
}
System.out.println(&quot;List of closed itemsets for the dataset contextPasquier99:&quot;);
// Print all the closed itemsets with their frequency
for (Pattern closed : closedPatterns) {
    System.out.println(Arrays.toString(closed.getItems()) +
            &quot;, freq=&quot; + closed.getMeasures()[0]);
}</code>
  <p>The goal is to find all the closed itemsets with a minimum
  frequency of 1. We start by reading the transactional database using
  the method <monospace>read()</monospace> of the
  <monospace>DatReader</monospace> instance. Then, we create a model
  with Choco-solver. Variables <monospace>freq</monospace> and
  <monospace>length</monospace> are created to store respectively the
  frequency and the length of the itemset. A boolean array of variables
  <monospace>x</monospace> represents the itemset, where
  <monospace>x[i] = 1</monospace> indicates that item
  <monospace>i</monospace> belongs to the itemset. Finally, we post
  three constraints:</p>
  <list list-type="bullet">
    <list-item>
      <p><monospace>model.sum(x, &quot;=&quot;, length).post()</monospace>:
      ensures that <inline-formula><alternatives>
      <tex-math><![CDATA[length = \sum x]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>l</mml:mi><mml:mi>e</mml:mi><mml:mi>n</mml:mi><mml:mi>g</mml:mi><mml:mi>t</mml:mi><mml:mi>h</mml:mi><mml:mo>=</mml:mo><mml:mo>∑</mml:mo><mml:mi>x</mml:mi></mml:mrow></mml:math></alternatives></inline-formula>.</p>
    </list-item>
    <list-item>
      <p><monospace>ConstraintFactory.coverSize(database, freq, x).post()</monospace>:
      ensures that <inline-formula><alternatives>
      <tex-math><![CDATA[freq = freq(x)]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mrow><mml:mi>f</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mo>=</mml:mo><mml:mi>f</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mi>q</mml:mi><mml:mrow><mml:mo stretchy="true" form="prefix">(</mml:mo><mml:mi>x</mml:mi><mml:mo stretchy="true" form="postfix">)</mml:mo></mml:mrow></mml:mrow></mml:math></alternatives></inline-formula>.</p>
    </list-item>
    <list-item>
      <p><monospace>ConstraintFactory.coverClosure(database, x).post()</monospace>:
      ensures that <inline-formula><alternatives>
      <tex-math><![CDATA[x]]></tex-math>
      <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>x</mml:mi></mml:math></alternatives></inline-formula>
      is closed w.r.t. the frequency.</p>
    </list-item>
  </list>
  <p>After finding all the solutions, we print them to the user.</p>
</sec>
<sec id="acknowledgements">
  <title>Acknowledgements</title>
  <p>This project was funded by IMT Atlantique.</p>
</sec>
</body>
<back>
<ref-list>
  <ref id="ref-SchausAG17">
    <element-citation publication-type="paper-conference">
      <person-group person-group-type="author">
        <name><surname>Schaus</surname><given-names>Pierre</given-names></name>
        <name><surname>Aoga</surname><given-names>John Oscar Raoul</given-names></name>
        <name><surname>Guns</surname><given-names>Tias</given-names></name>
      </person-group>
      <article-title>CoverSize: A global constraint for frequency-based itemset mining</article-title>
      <source>Proceedings of the 23rd CP 2017</source>
      <year iso-8601-date="2017">2017</year>
      <pub-id pub-id-type="doi">10.1007/978-3-319-66158-2_34</pub-id>
      <fpage>529</fpage>
      <lpage>546</lpage>
    </element-citation>
  </ref>
  <ref id="ref-BelaidBL19">
    <element-citation publication-type="paper-conference">
      <person-group person-group-type="author">
        <name><surname>Belaid</surname><given-names>Mohamed-Bachir</given-names></name>
        <name><surname>Bessiere</surname><given-names>Christian</given-names></name>
        <name><surname>Lazaar</surname><given-names>Nadjib</given-names></name>
      </person-group>
      <article-title>Constraint programming for association rules</article-title>
      <source>Proceedings of the 2019 SIAM International Conference on Data Mining (SDM)</source>
      <year iso-8601-date="2019">2019</year>
      <pub-id pub-id-type="doi">10.1137/1.9781611975673.15</pub-id>
      <fpage>127</fpage>
      <lpage>135</lpage>
    </element-citation>
  </ref>
  <ref id="ref-Belaid2BL19">
    <element-citation publication-type="paper-conference">
      <person-group person-group-type="author">
        <name><surname>Belaid</surname><given-names>M.</given-names></name>
        <name><surname>Bessiere</surname><given-names>C.</given-names></name>
        <name><surname>Lazaar</surname><given-names>N.</given-names></name>
      </person-group>
      <article-title>Constraint programming for mining borders of frequent itemsets</article-title>
      <source>Proceedings of IJCAI 2019</source>
      <year iso-8601-date="2019">2019</year>
      <pub-id pub-id-type="doi">10.24963/ijcai.2019/149</pub-id>
      <fpage>1064</fpage>
      <lpage>1070</lpage>
    </element-citation>
  </ref>
  <ref id="ref-guns2011itemset">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Guns</surname><given-names>Tias</given-names></name>
        <name><surname>Nijssen</surname><given-names>Siegfried</given-names></name>
        <name><surname>De Raedt</surname><given-names>Luc</given-names></name>
      </person-group>
      <article-title>Itemset mining: A constraint programming perspective</article-title>
      <source>Artificial Intelligence</source>
      <publisher-name>Elsevier</publisher-name>
      <year iso-8601-date="2011">2011</year>
      <volume>175</volume>
      <issue>12</issue>
      <pub-id pub-id-type="doi">10.1016/j.artint.2011.05.002</pub-id>
      <fpage>1951</fpage>
      <lpage>1983</lpage>
    </element-citation>
  </ref>
  <ref id="ref-ijcai2022p0261">
    <element-citation publication-type="paper-conference">
      <person-group person-group-type="author">
        <name><surname>Vernerey</surname><given-names>Charles</given-names></name>
        <name><surname>Loudni</surname><given-names>Samir</given-names></name>
        <name><surname>Aribi</surname><given-names>Noureddine</given-names></name>
        <name><surname>Lebbah</surname><given-names>Yahia</given-names></name>
      </person-group>
      <article-title>Threshold-free pattern mining meets multi-objective optimization: Application to association rules</article-title>
      <source>Proceedings of the thirty-first international joint conference on artificial intelligence, IJCAI-22</source>
      <year iso-8601-date="2022">2022</year>
      <pub-id pub-id-type="doi">10.24963/ijcai.2022/261</pub-id>
      <fpage>1880</fpage>
      <lpage>1886</lpage>
    </element-citation>
  </ref>
  <ref id="ref-prud2022choco">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Prud’homme</surname><given-names>Charles</given-names></name>
        <name><surname>Fages</surname><given-names>Jean-Guillaume</given-names></name>
      </person-group>
      <article-title>Choco-solver: A Java library for constraint programming</article-title>
      <source>Journal of Open Source Software</source>
      <year iso-8601-date="2022">2022</year>
      <volume>7</volume>
      <issue>78</issue>
      <pub-id pub-id-type="doi">10.21105/joss.04708</pub-id>
      <fpage>4708</fpage>
      <lpage></lpage>
    </element-citation>
  </ref>
  <ref id="ref-HienLALLOZ20">
    <element-citation publication-type="paper-conference">
      <person-group person-group-type="author">
        <name><surname>Hien</surname><given-names>A.</given-names></name>
        <name><surname>Loudni</surname><given-names>S.</given-names></name>
        <name><surname>Aribi</surname><given-names>N.</given-names></name>
        <name><surname>Lebbah</surname><given-names>Y.</given-names></name>
        <name><surname>Laghzaoui</surname><given-names>M.</given-names></name>
        <name><surname>Ouali</surname><given-names>A.</given-names></name>
        <name><surname>Zimmermann</surname><given-names>A.</given-names></name>
      </person-group>
      <article-title>A relaxation-based approach for mining diverse closed patterns</article-title>
      <source>Proceedings of ECML PKDD 2020</source>
      <publisher-name>Springer</publisher-name>
      <year iso-8601-date="2020">2020</year>
      <volume>12457</volume>
      <pub-id pub-id-type="doi">10.1007/978-3-030-67658-2_3</pub-id>
      <fpage>36</fpage>
      <lpage>54</lpage>
    </element-citation>
  </ref>
  <ref id="ref-rossi2006handbook">
    <element-citation publication-type="book">
      <person-group person-group-type="author">
        <name><surname>Rossi</surname><given-names>Francesca</given-names></name>
        <name><surname>Van Beek</surname><given-names>Peter</given-names></name>
        <name><surname>Walsh</surname><given-names>Toby</given-names></name>
      </person-group>
      <source>Handbook of constraint programming</source>
      <publisher-name>Elsevier</publisher-name>
      <year iso-8601-date="2006">2006</year>
    </element-citation>
  </ref>
  <ref id="ref-agrawal1994fast">
    <element-citation publication-type="paper-conference">
      <person-group person-group-type="author">
        <name><surname>Agrawal</surname><given-names>Rakesh</given-names></name>
        <name><surname>Srikant</surname><given-names>Ramakrishnan</given-names></name>
        <name><surname>others</surname></name>
      </person-group>
      <article-title>Fast algorithms for mining association rules</article-title>
      <source>Proc. 20th int. Conf. Very large data bases, VLDB</source>
      <publisher-name>Santiago, Chile</publisher-name>
      <year iso-8601-date="1994">1994</year>
      <volume>1215</volume>
      <fpage>487</fpage>
      <lpage>499</lpage>
    </element-citation>
  </ref>
  <ref id="ref-martinez2008genminer">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Martinez</surname><given-names>Ricardo</given-names></name>
        <name><surname>Pasquier</surname><given-names>Nicolas</given-names></name>
        <name><surname>Pasquier</surname><given-names>Claude</given-names></name>
      </person-group>
      <article-title>GenMiner: Mining non-redundant association rules from integrated gene expression data and annotations</article-title>
      <source>Bioinformatics</source>
      <publisher-name>Oxford University Press</publisher-name>
      <year iso-8601-date="2008">2008</year>
      <volume>24</volume>
      <issue>22</issue>
      <pub-id pub-id-type="doi">10.1093/bioinformatics/btn490</pub-id>
      <fpage>2643</fpage>
      <lpage>2644</lpage>
    </element-citation>
  </ref>
  <ref id="ref-erlandsson2016finding">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Erlandsson</surname><given-names>Fredrik</given-names></name>
        <name><surname>Bródka</surname><given-names>Piotr</given-names></name>
        <name><surname>Borg</surname><given-names>Anton</given-names></name>
        <name><surname>Johnson</surname><given-names>Henric</given-names></name>
      </person-group>
      <article-title>Finding influential users in social media using association rule learning</article-title>
      <source>Entropy</source>
      <publisher-name>MDPI</publisher-name>
      <year iso-8601-date="2016">2016</year>
      <volume>18</volume>
      <issue>5</issue>
      <pub-id pub-id-type="doi">10.3390/e18050164</pub-id>
      <fpage>164</fpage>
      <lpage></lpage>
    </element-citation>
  </ref>
  <ref id="ref-ugarte2017skypattern">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Ugarte</surname><given-names>Willy</given-names></name>
        <name><surname>Boizumault</surname><given-names>Patrice</given-names></name>
        <name><surname>Crémilleux</surname><given-names>Bruno</given-names></name>
        <name><surname>Lepailleur</surname><given-names>Alban</given-names></name>
        <name><surname>Loudni</surname><given-names>Samir</given-names></name>
        <name><surname>Plantevit</surname><given-names>Marc</given-names></name>
        <name><surname>Raı̈ssi</surname><given-names>Chedy</given-names></name>
        <name><surname>Soulet</surname><given-names>Arnaud</given-names></name>
      </person-group>
      <article-title>Skypattern mining: From pattern condensed representations to dynamic constraint satisfaction problems</article-title>
      <source>Artificial Intelligence</source>
      <publisher-name>Elsevier</publisher-name>
      <year iso-8601-date="2017">2017</year>
      <volume>244</volume>
      <pub-id pub-id-type="doi">10.1016/j.artint.2015.04.003</pub-id>
      <fpage>48</fpage>
      <lpage>69</lpage>
    </element-citation>
  </ref>
  <ref id="ref-lazaar2016global">
    <element-citation publication-type="paper-conference">
      <person-group person-group-type="author">
        <name><surname>Lazaar</surname><given-names>Nadjib</given-names></name>
        <name><surname>Lebbah</surname><given-names>Yahia</given-names></name>
        <name><surname>Loudni</surname><given-names>Samir</given-names></name>
        <name><surname>Maamar</surname><given-names>Mehdi</given-names></name>
        <name><surname>Lemière</surname><given-names>Valentin</given-names></name>
        <name><surname>Bessiere</surname><given-names>Christian</given-names></name>
        <name><surname>Boizumault</surname><given-names>Patrice</given-names></name>
      </person-group>
      <article-title>A global constraint for closed frequent pattern mining</article-title>
      <source>Principles and practice of constraint programming: 22nd international conference, CP 2016, toulouse, france, september 5-9, 2016, proceedings 22</source>
      <publisher-name>Springer</publisher-name>
      <year iso-8601-date="2016">2016</year>
      <pub-id pub-id-type="doi">10.1007/978-3-319-44953-1_22</pub-id>
      <fpage>333</fpage>
      <lpage>349</lpage>
    </element-citation>
  </ref>
  <ref id="ref-fournier2017survey">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Fournier-Viger</surname><given-names>Philippe</given-names></name>
        <name><surname>Lin</surname><given-names>Jerry Chun-Wei</given-names></name>
        <name><surname>Vo</surname><given-names>Bay</given-names></name>
        <name><surname>Chi</surname><given-names>Tin Truong</given-names></name>
        <name><surname>Zhang</surname><given-names>Ji</given-names></name>
        <name><surname>Le</surname><given-names>Hoai Bac</given-names></name>
      </person-group>
      <article-title>A survey of itemset mining</article-title>
      <source>Wiley Interdisciplinary Reviews: Data Mining and Knowledge Discovery</source>
      <publisher-name>Wiley Online Library</publisher-name>
      <year iso-8601-date="2017">2017</year>
      <volume>7</volume>
      <issue>4</issue>
      <pub-id pub-id-type="doi">10.1002/widm.1207</pub-id>
      <fpage>e1207</fpage>
      <lpage></lpage>
    </element-citation>
  </ref>
  <ref id="ref-baptiste2001constraint">
    <element-citation publication-type="book">
      <person-group person-group-type="author">
        <name><surname>Baptiste</surname><given-names>Philippe</given-names></name>
        <name><surname>Le Pape</surname><given-names>Claude</given-names></name>
        <name><surname>Nuijten</surname><given-names>Wim</given-names></name>
      </person-group>
      <source>Constraint-based scheduling: Applying constraint programming to scheduling problems</source>
      <publisher-name>Springer Science &amp; Business Media</publisher-name>
      <year iso-8601-date="2001">2001</year>
      <volume>39</volume>
    </element-citation>
  </ref>
  <ref id="ref-zhang2013constraint">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Zhang</surname><given-names>Long</given-names></name>
        <name><surname>Zhuang</surname><given-names>Yi</given-names></name>
        <name><surname>Zhu</surname><given-names>Wei</given-names></name>
      </person-group>
      <article-title>Constraint programming based virtual cloud resources allocation model</article-title>
      <source>International Journal of Hybrid Information Technology</source>
      <publisher-name>Citeseer</publisher-name>
      <year iso-8601-date="2013">2013</year>
      <volume>6</volume>
      <issue>6</issue>
      <pub-id pub-id-type="doi">10.14257/ijhit.2013.6.6.30</pub-id>
      <fpage>333</fpage>
      <lpage>344</lpage>
    </element-citation>
  </ref>
  <ref id="ref-van1999cplan">
    <element-citation publication-type="paper-conference">
      <person-group person-group-type="author">
        <name><surname>Van Beek</surname><given-names>Peter</given-names></name>
        <name><surname>Chen</surname><given-names>Xinguang</given-names></name>
      </person-group>
      <article-title>CPlan: A constraint programming approach to planning</article-title>
      <source>AAAI/IAAI</source>
      <year iso-8601-date="1999">1999</year>
      <fpage>585</fpage>
      <lpage>590</lpage>
    </element-citation>
  </ref>
  <ref id="ref-aaai12081">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Kadıoğlu</surname><given-names>Serdar</given-names></name>
        <name><surname>Wang</surname><given-names>Xin</given-names></name>
        <name><surname>Hosseininasab</surname><given-names>Amin</given-names></name>
        <name><surname>Hoeve</surname><given-names>Willem-Jan van</given-names></name>
      </person-group>
      <article-title>Seq2Pat: Sequence-to-pattern generation to bridge pattern mining with machine learning</article-title>
      <source>AI Magazine</source>
      <year iso-8601-date="2023">2023</year>
      <volume>44</volume>
      <issue>1</issue>
      <uri>https://onlinelibrary.wiley.com/doi/abs/10.1002/aaai.12081</uri>
      <pub-id pub-id-type="doi">10.1002/aaai.12081</pub-id>
      <fpage>54</fpage>
      <lpage>66</lpage>
    </element-citation>
  </ref>
  <ref id="ref-seq2pat2022">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Wang</surname><given-names>Xin</given-names></name>
        <name><surname>Hosseininasab</surname><given-names>Amin</given-names></name>
        <name><surname>Colunga</surname><given-names>Pablo</given-names></name>
        <name><surname>Kadıoğlu</surname><given-names>Serdar</given-names></name>
        <name><surname>Hoeve</surname><given-names>Willem-Jan van</given-names></name>
      </person-group>
      <article-title>Seq2Pat: Sequence-to-pattern generation for constraint-based sequential pattern mining</article-title>
      <source>Proceedings of the AAAI Conference on Artificial Intelligence</source>
      <year iso-8601-date="2022">2022</year>
      <volume>36</volume>
      <issue>11</issue>
      <uri>https://ojs.aaai.org/index.php/AAAI/article/view/21542</uri>
      <pub-id pub-id-type="doi">10.1609/aaai.v36i11.21542</pub-id>
      <fpage>12665</fpage>
      <lpage>12671</lpage>
    </element-citation>
  </ref>
  <ref id="ref-Frontiers2022">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Ghosh</surname><given-names>Sohom</given-names></name>
        <name><surname>Yadav</surname><given-names>Shefali</given-names></name>
        <name><surname>Wang</surname><given-names>Xin</given-names></name>
        <name><surname>Chakrabarty</surname><given-names>Bibhash</given-names></name>
        <name><surname>Kadıoğlu</surname><given-names>Serdar</given-names></name>
      </person-group>
      <article-title>Dichotomic pattern mining integrated with constraint reasoning for digital behavior analysis</article-title>
      <source>Frontiers in Artificial Intelligence</source>
      <publisher-name>Frontiers</publisher-name>
      <year iso-8601-date="2022">2022</year>
      <volume>5</volume>
      <pub-id pub-id-type="doi">10.3389/frai.2022.868085</pub-id>
      <fpage>868085</fpage>
      <lpage></lpage>
    </element-citation>
  </ref>
  <ref id="ref-DPM2022">
    <element-citation publication-type="paper-conference">
      <person-group person-group-type="author">
        <name><surname>Wang</surname><given-names>Xin</given-names></name>
        <name><surname>Kadıoğlu</surname><given-names>Serdar</given-names></name>
      </person-group>
      <article-title>Dichotomic pattern mining with applications to intent prediction from semi-structured clickstream datasets</article-title>
      <source>The AAAI-22 workshop on knowledge discovery from unstructured data in financial services</source>
      <publisher-name>arXiv</publisher-name>
      <year iso-8601-date="2022">2022</year>
      <uri>https://arxiv.org/abs/2201.09178</uri>
    </element-citation>
  </ref>
</ref-list>
</back>
</article>
