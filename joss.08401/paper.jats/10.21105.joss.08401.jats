<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE article PUBLIC "-//NLM//DTD JATS (Z39.96) Journal Publishing DTD v1.2 20190208//EN"
                  "JATS-publishing1.dtd">
<article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="1.2" article-type="other">
<front>
<journal-meta>
<journal-id></journal-id>
<journal-title-group>
<journal-title>Journal of Open Source Software</journal-title>
<abbrev-journal-title>JOSS</abbrev-journal-title>
</journal-title-group>
<issn publication-format="electronic">2475-9066</issn>
<publisher>
<publisher-name>Open Journals</publisher-name>
</publisher>
</journal-meta>
<article-meta>
<article-id pub-id-type="publisher-id">8401</article-id>
<article-id pub-id-type="doi">10.21105/joss.08401</article-id>
<title-group>
<article-title>VILLASnode: An Open-Source Real-time Multi-protocol
Gateway</article-title>
</title-group>
<contrib-group>
<contrib contrib-type="author">
<contrib-id contrib-id-type="orcid">https://orcid.org/0000-0003-3384-6750</contrib-id>
<name>
<surname>Vogel</surname>
<given-names>Steffen</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
<xref ref-type="aff" rid="aff-3"/>
</contrib>
<contrib contrib-type="author">
<contrib-id contrib-id-type="orcid">https://orcid.org/0000-0002-7011-9846</contrib-id>
<name>
<surname>Eiling</surname>
<given-names>Niklas</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
</contrib>
<contrib contrib-type="author">
<contrib-id contrib-id-type="orcid">https://orcid.org/0000-0002-6252-2029</contrib-id>
<name>
<surname>Pitz</surname>
<given-names>Manuel</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
</contrib>
<contrib contrib-type="author">
<contrib-id contrib-id-type="orcid">https://orcid.org/0009-0005-7385-4642</contrib-id>
<name>
<surname>Bach</surname>
<given-names>Alexandra</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
</contrib>
<contrib contrib-type="author">
<name>
<surname>Stevic</surname>
<given-names>Marija</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
<xref ref-type="aff" rid="aff-3"/>
</contrib>
<contrib contrib-type="author">
<contrib-id contrib-id-type="orcid">https://orcid.org/0000-0003-1914-9801</contrib-id>
<name>
<surname>Monti</surname>
<given-names>Prof. Antonello</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
<xref ref-type="aff" rid="aff-2"/>
</contrib>
<aff id="aff-1">
<institution-wrap>
<institution>Institute for Automation of Complex Power Systems, RWTH
Aachen University, Germany</institution>
</institution-wrap>
</aff>
<aff id="aff-2">
<institution-wrap>
<institution>Fraunhofer Institute for Applied Information Technology,
Aachen, Germany</institution>
</institution-wrap>
</aff>
<aff id="aff-3">
<institution-wrap>
<institution>OPAL-RT Germany GmbH</institution>
</institution-wrap>
</aff>
</contrib-group>
<pub-date date-type="pub" publication-format="electronic" iso-8601-date="2025-06-20">
<day>20</day>
<month>6</month>
<year>2025</year>
</pub-date>
<volume>10</volume>
<issue>112</issue>
<fpage>8401</fpage>
<permissions>
<copyright-statement>Authors of papers retain copyright and release the
work under a Creative Commons Attribution 4.0 International License (CC
BY 4.0)</copyright-statement>
<copyright-year>2025</copyright-year>
<copyright-holder>The article authors</copyright-holder>
<license license-type="open-access" xlink:href="https://creativecommons.org/licenses/by/4.0/">
<license-p>Authors of papers retain copyright and release the work under
a Creative Commons Attribution 4.0 International License (CC BY
4.0)</license-p>
</license>
</permissions>
<kwd-group kwd-group-type="author">
<kwd>C/C++</kwd>
<kwd>Real-time</kwd>
<kwd>Distributed experiments</kwd>
<kwd>Electrical grid simulation</kwd>
</kwd-group>
</article-meta>
</front>
<body>
<sec id="summary">
  <title>Summary</title>
  <p>VILLASnode is a multi-protocol gateway, designed to facilitate
  real-time data exchange between various components of
  geographically-distributed real-time experiments. Components can be
  testbeds, digital real-time simulators, software tools, and physical
  devices. It is designed for the co-simulation of power system and
  related energy applications. VILLASnode was originally designed for
  the co-simulation of electrical networks, but since then was further
  extended to cover a larger variety of use cases and domains.
  VILLASnode serves as the gateway that connects components across
  different infrastructures by providing a set of protocols and
  customized third-party implementations, e.g., different simulators. It
  enables seamless collaboration in research and testing environments
  while safeguarding the intellectual property of the infrastructures.
  The components of every infrastructure appear as a black box. The
  infrastructure does not need to share models or confidential
  information.</p>
  <p>VILLASnode is a set of Linux command line tools and shared library.
  It can be installed from source or via a OCI container. It is written
  in C/C++ and designed in a modular and extensible way.</p>
  <p>All components that are interfaced by the VILLASnode gateway are
  represented by nodes (<inline-formula><alternatives>
  <tex-math><![CDATA[n]]></tex-math>
  <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>n</mml:mi></mml:math></alternatives></inline-formula>).
  These nodes act as sinks or sources for data specific to the
  component. Every node is an instance of a node-type. In a single
  VILLASnode instance, multiple instances of the same node-type can
  co-exist at the same time. The basic data package, common for all
  node-types, includes timestamped data, constituting a sample. Up to 64
  values can form a sample. Samples may need modification or filtering.
  VILLASnode supports hooks (<inline-formula><alternatives>
  <tex-math><![CDATA[h]]></tex-math>
  <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>h</mml:mi></mml:math></alternatives></inline-formula>)
  for this purpose. Hooks are simple callback functions, which are
  called whenever a message is processed. Paths
  (<inline-formula><alternatives>
  <tex-math><![CDATA[p]]></tex-math>
  <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>p</mml:mi></mml:math></alternatives></inline-formula>)
  take care of the processing and define the connections and dataflows
  between nodes. Node-types, hooks, and paths need to be initalized in a
  JSON configuration file that is passed when starting VILLASnode.
  Figure 1 shows an example of an experiment where five different
  node-types are used, connected by three paths, using three hooks. It
  includes queues (<inline-formula><alternatives>
  <tex-math><![CDATA[q]]></tex-math>
  <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>q</mml:mi></mml:math></alternatives></inline-formula>)
  and registers (<inline-formula><alternatives>
  <tex-math><![CDATA[r]]></tex-math>
  <mml:math display="inline" xmlns:mml="http://www.w3.org/1998/Math/MathML"><mml:mi>r</mml:mi></mml:math></alternatives></inline-formula>).
  Queues temporarily store data before data is forwarded to registers.
  Registers provide the possibility to (de-)mulitplex data and to create
  new samples.</p>
  <fig>
    <caption><p>Example of modular experimental design with nodes,
    paths, and hooks
    (<xref alt="Vogel et al., 2025" rid="ref-villasnode_docs" ref-type="bibr">Vogel
    et al., 2025</xref>).</p></caption>
    <graphic mimetype="image" mime-subtype="svg+xml" xlink:href="VILLASnode_paths.svg" />
  </fig>
  <p>External software tools and programming languages can be interfaced
  with VILLASnode via several methods. Locally, they can be spawned as
  sub-processes and exchange data via shared-memory or standard I/O
  streams. Remotely, they can be interfaced via any of the supported
  node-types and protocols, such as MQTT or TCP sockets. Additionally,
  VILLASnode can be configured and controlled remotely by an HTTP
  REST-style Application Programming Interface (API). An OpenAPI
  specification of the API is provided in order to generate API bindings
  for a variety of different programming languages. VILLASnode is
  written in C++ and supports real-time execution on real-time Linux
  systems. To provide all necassary information, VILLASnode has detailed
  documentation
  (<xref alt="Vogel et al., 2025" rid="ref-villasnode_docs" ref-type="bibr">Vogel
  et al., 2025</xref>). It includes installation recommendations and
  best practices for development as well as example configurations and
  beginners guides, so-called labs.</p>
  <p>VILLASnode can be compared with other available open-source
  co-simulation tools, such as Mosaik
  (<xref alt="Rohjans et al., 2013" rid="ref-rohjans_mosaik_2013" ref-type="bibr">Rohjans
  et al., 2013</xref>) or Helics
  (<xref alt="Hardy et al., 2024" rid="ref-hardy_helics_2024" ref-type="bibr">Hardy
  et al., 2024</xref>). Mosaik uses a SimAPI to communicate with other
  simulators based on fixed timesteps. Integrated simulators need to
  support the SimAPI, which requires extra implementations. Simulators
  cannot reuse existing supported protocols, which VILLASnode makes use
  of and takes care of protocol conversion. Helics is designed for
  large-scale testing and supports bindings for different languages. It
  uses a broker that manages the communication between the simulators,
  whereas VILLASnode has a peer-to-peer architecture.</p>
</sec>
<sec id="statement-of-need">
  <title>Statement of need</title>
  <p>VILLASnode supports the coupling of real-time simulators of
  different hardware and software vendors, specifications, and
  implementations
  (<xref alt="Monti et al., 2018" rid="ref-monti_global_2018" ref-type="bibr">Monti
  et al., 2018</xref>). These simulators play a crucial role in both
  academic research and industrial applications, especially within
  simulation of electrical power networks. They are primarily utilized
  for hardware-in-the-loop (HiL) simulations. As an example, in the
  scope of the ENSURE project, the German electrical grid is emulated
  with the ability to couple dynamically simulators and physical
  components that can be interfaced safely via analog input and output
  signals
  (<xref alt="Mehlmann et al., 2023" rid="ref-Mehlmann2023" ref-type="bibr">Mehlmann
  et al., 2023</xref>). This approach not only reduces development costs
  but also allows for the validation of components under scenarios in
  which it is difficult or unsafe to replicate real-world field
  scenarios. Moreover, VILLASnode supports the linking of simulators and
  real-time simulators from different vendors so that models do not need
  to be shared. It allows for communication between proprietary
  simulation models that cannot be shared, thus protecting intellectual
  property during collaboration. Local simulators and simulation
  infrastructure can be combined in a powerful arrangement unavailable
  in any individual infrastructure. This approach has the additional
  advantage of allowing co-simulation with heterogeneus methods,
  algorithms, and communication protocols. Communication with
  components, sensors, or actuators can also be implemented using
  VILLASnode.</p>
  <p>This can be extended to geographically-distributed experiments. In
  this case, VILLASnode takes care of the communication between the
  different participants within an experiment that spans multiple
  infrastructures. Not only can simulators be included, but physical
  devices can also be integrated
  (<xref alt="Bach &amp; Monti, 2025" rid="ref-Bach2025" ref-type="bibr">Bach
  &amp; Monti, 2025</xref>). Although communication latencies constrain
  the dynamics of experiments for real-time applications, VILLASnode
  offers significant advantages such as leveraging existing
  infrastructure across sites and facilitating collaboration among
  interdisciplinary teams. Manufacturers, customers, and certifiers
  benefit from remote access and distributed testing while maintaining
  data confidentiality and intellectual property. Current work includes
  automation of integration of VILLASnode in practical field devices
  (<xref alt="Pitz et al., 2024" rid="ref-Pitz2024" ref-type="bibr">Pitz
  et al., 2024</xref>).</p>
</sec>
<sec id="features">
  <title>Features</title>
  <p>As the gateway, VILLASnode is the main component of the
  VILLASframework, which offers several key features.</p>
  <p>The gateway supports a wide range of established data exchange
  protocols. Support for various message brokers like MQTT, AMQP,
  nanomsg, ZeroMQ, Redis, and Kafka provide connectivity to existing
  software platforms. Support for process bus protocols such as CAN,
  EtherCAT, Modbus, IEC 61850-8-1 (GOOSE), and IEC 61850-9-2 (Sampled
  Values) enable connectivity to physical devices. A range of web-based
  protocols like WebRTC, WebSockets, NGSI, and a HTTP REST API
  facilitate integration into web-based interfaces. And a set of generic
  protocols add support for plain UDP/TCP/Ethernet sockets, Infiniband,
  file-based I/O, and communication with other processes via standard
  I/O or shared memory regions. For custom interfaces that require hard
  real-time timeing guarantees, the gateway supports communicating with
  Xilinx/AMD FPGA evaluation boards via PCIexpress and user space
  drivers implemented on top of VFIO.</p>
  <p>Other components of the framework include VILLASweb, which provides
  visualization and monitoring of distributed experiments via a web
  browser, and VILLAScontroller, which integrates and orchestrates the
  execution of gateways and related hardware and software component in a
  joint experiment.</p>
</sec>
<sec id="acknowledgements">
  <title>Acknowledgements</title>
  <p>We like to thank several colleagues and students who supported us.
  Especially, we thank Leonardo Carreras, Laura Fuentes Grau, Andres
  Acosta, and Felix Wege. The project’s support includes:</p>
  <list list-type="bullet">
    <list-item>
      <p><ext-link ext-link-type="uri" xlink:href="http://re-serve.eu/">RESERVE</ext-link>:
      European Unions Horizon 2020 research and innovation programme
      under grant agreement No. 727481.</p>
    </list-item>
    <list-item>
      <p><ext-link ext-link-type="uri" xlink:href="https://villas.fein-aachen.org/website/">VILLAS</ext-link>:
      Funding provided by
      <ext-link ext-link-type="uri" xlink:href="http://www.jara.org/en/research/energy">JARA-ENERGY</ext-link>.
      Jülich-Aachen Research Alliance (JARA) is an initiative of RWTH
      Aachen University and Forschungszentrum Jülich.</p>
    </list-item>
    <list-item>
      <p><ext-link ext-link-type="uri" xlink:href="https://www.uel4-0.de/Home/">Urban
      Energy Lab 4.0</ext-link>: Funding is provided by the
      <ext-link ext-link-type="uri" xlink:href="https://ec.europa.eu/regional_policy/en/funding/erdf/">European
      Regional Development Fund (EFRE)</ext-link>.</p>
    </list-item>
    <list-item>
      <p><ext-link ext-link-type="uri" xlink:href="https://erigrid2.eu/">ERIGrid2.0</ext-link>:
      European Unions Horizon 2020 research and innovation programme
      under grant agreement No. 870620.</p>
    </list-item>
    <list-item>
      <p><ext-link ext-link-type="uri" xlink:href="https://www.kopernikus-projekte.de/projekte/ensure">ENSURE</ext-link>:
      Federal Ministry of Education and Research supports the project
      under identification 03SFK1C0-3.</p>
    </list-item>
    <list-item>
      <p><ext-link ext-link-type="uri" xlink:href="https://nfdi4energy.uol.de/">NFDI4Energy</ext-link>:
      Funded by the Deutsche Forschungsgemeinschaft (DFG, German
      Research Foundation) – 501865131.</p>
    </list-item>
    <list-item>
      <p><ext-link ext-link-type="uri" xlink:href="https://hyperride.eu/">HYPERRIDE</ext-link>:
      European Unions Horizon 2020 research and innovation programme
      under grant agreement No. 957788.</p>
    </list-item>
    <list-item>
      <p><ext-link ext-link-type="uri" xlink:href="https://ai-effect.eu/">AI-EFFECT</ext-link>:
      European Unions Horizon 2020 research and innovation programme
      under grant agreement No. 101172952.</p>
    </list-item>
    <list-item>
      <p><ext-link ext-link-type="uri" xlink:href="https://enertef.eu/">EnerTEF</ext-link>:
      European Unions Horizon 2020 research and innovation programme
      under grant agreement No. 101172887.</p>
    </list-item>
    <list-item>
      <p><ext-link ext-link-type="uri" xlink:href="https://target-x.eu/">Target-X</ext-link>:
      European Unions Horizon 2020 research and innovation programme
      under grant agreement No. 101096614.</p>
    </list-item>
  </list>
</sec>
</body>
<back>
<ref-list>
  <title></title>
  <ref id="ref-hardy_helics_2024">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Hardy</surname><given-names>Trevor D.</given-names></name>
        <name><surname>Palmintier</surname><given-names>Bryan</given-names></name>
        <name><surname>Top</surname><given-names>Philip L.</given-names></name>
        <name><surname>Krishnamurthy</surname><given-names>Dheepak</given-names></name>
        <name><surname>Fuller</surname><given-names>Jason C.</given-names></name>
      </person-group>
      <article-title>HELICS: A co-simulation framework for scalable multi-domain modeling and analysis</article-title>
      <source>IEEE Access</source>
      <year iso-8601-date="2024">2024</year>
      <date-in-citation content-type="access-date"><year iso-8601-date="2025-07-10">2025</year><month>07</month><day>10</day></date-in-citation>
      <volume>12</volume>
      <issn>2169-3536</issn>
      <uri>https://ieeexplore.ieee.org/document/10424422</uri>
      <pub-id pub-id-type="doi">10.1109/ACCESS.2024.3363615</pub-id>
      <fpage>24325</fpage>
      <lpage>24347</lpage>
    </element-citation>
  </ref>
  <ref id="ref-rohjans_mosaik_2013">
    <element-citation publication-type="paper-conference">
      <person-group person-group-type="author">
        <name><surname>Rohjans</surname><given-names>S.</given-names></name>
        <name><surname>Lehnhoff</surname><given-names>S.</given-names></name>
        <name><surname>Schütte</surname><given-names>S.</given-names></name>
        <name><surname>Scherfke</surname><given-names>S.</given-names></name>
        <name><surname>Hussain</surname><given-names>S.</given-names></name>
      </person-group>
      <article-title>Mosaik - a modular platform for the evaluation of agent-based smart grid control</article-title>
      <source>IEEE PES ISGT europe 2013</source>
      <year iso-8601-date="2013-10">2013</year><month>10</month>
      <date-in-citation content-type="access-date"><year iso-8601-date="2025-07-10">2025</year><month>07</month><day>10</day></date-in-citation>
      <uri>https://ieeexplore.ieee.org/document/6695486</uri>
      <pub-id pub-id-type="doi">10.1109/ISGTEurope.2013.6695486</pub-id>
      <fpage>1</fpage>
      <lpage>5</lpage>
    </element-citation>
  </ref>
  <ref id="ref-villasnode_docs">
    <element-citation>
      <person-group person-group-type="author">
        <name><surname>Vogel</surname><given-names>Steffen</given-names></name>
        <name><surname>Bach</surname><given-names>Alexandra</given-names></name>
        <name><surname>Potter</surname><given-names>Dennis</given-names></name>
        <name><surname>Stevic</surname><given-names>Marija</given-names></name>
        <name><surname>Pitz</surname><given-names>Manuel</given-names></name>
        <name><surname>Mirz</surname><given-names>Markus</given-names></name>
      </person-group>
      <article-title>VILLASnode documentation</article-title>
      <publisher-name>https://villas.fein-aachen.org/docs/node/</publisher-name>
      <year iso-8601-date="2025">2025</year>
    </element-citation>
  </ref>
  <ref id="ref-monti_global_2018">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Monti</surname><given-names>Antonello</given-names></name>
        <name><surname>Stevic</surname><given-names>Marija</given-names></name>
        <name><surname>Vogel</surname><given-names>Steffen</given-names></name>
        <name><surname>De Doncker</surname><given-names>Rik W.</given-names></name>
        <name><surname>Bompard</surname><given-names>Ettore</given-names></name>
        <name><surname>Estebsari</surname><given-names>Abouzar</given-names></name>
        <name><surname>Profumo</surname><given-names>Francesco</given-names></name>
        <name><surname>Hovsapian</surname><given-names>Rob</given-names></name>
        <name><surname>Mohanpurkar</surname><given-names>Manish</given-names></name>
        <name><surname>Flicker</surname><given-names>Jack David</given-names></name>
        <name><surname>Gevorgian</surname><given-names>Vahan</given-names></name>
        <name><surname>Suryanarayanan</surname><given-names>Siddharth</given-names></name>
        <name><surname>Srivastava</surname><given-names>Anurag K.</given-names></name>
        <name><surname>Benigni</surname><given-names>Andrea</given-names></name>
      </person-group>
      <article-title>A global real-time superlab: Enabling high penetration of power electronics in the electric grid</article-title>
      <source>IEEE Power Electronics Magazine</source>
      <year iso-8601-date="2018-09">2018</year><month>09</month>
      <date-in-citation content-type="access-date"><year iso-8601-date="2023-10-10">2023</year><month>10</month><day>10</day></date-in-citation>
      <volume>5</volume>
      <issue>3</issue>
      <issn>2329-9215</issn>
      <uri>https://ieeexplore.ieee.org/document/8458285</uri>
      <pub-id pub-id-type="doi">10.1109/MPEL.2018.2850698</pub-id>
      <fpage>35</fpage>
      <lpage>44</lpage>
    </element-citation>
  </ref>
  <ref id="ref-Pitz2024">
    <element-citation publication-type="paper-conference">
      <person-group person-group-type="author">
        <name><surname>Pitz</surname><given-names>Manuel</given-names></name>
        <name><surname>Wege</surname><given-names>Felix</given-names></name>
        <name><surname>Eiling</surname><given-names>Niklas</given-names></name>
        <name><surname>Vogel</surname><given-names>Steffen</given-names></name>
        <name><surname>Bareis</surname><given-names>Vincent</given-names></name>
        <name><surname>Monti</surname><given-names>Antonello</given-names></name>
      </person-group>
      <article-title>Automated deployment of single-board computer based grid measurement and co-simulation equipment</article-title>
      <source>2024 open source modelling and simulation of energy systems (OSMSES)</source>
      <publisher-loc>Vienna, Austria</publisher-loc>
      <year iso-8601-date="2024">2024</year>
      <pub-id pub-id-type="doi">10.1109/OSMSES62085.2024.10668996</pub-id>
      <fpage>1</fpage>
      <lpage>6</lpage>
    </element-citation>
  </ref>
  <ref id="ref-Mehlmann2023">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Mehlmann</surname><given-names>Gert</given-names></name>
        <name><surname>Kühnapfel</surname><given-names>Uwe</given-names></name>
        <name><surname>Wege</surname><given-names>Felix</given-names></name>
        <name><surname>Winkens</surname><given-names>Alexander</given-names></name>
        <name><surname>Scheibe</surname><given-names>Christian</given-names></name>
        <name><surname>Vogel</surname><given-names>Steffen</given-names></name>
      </person-group>
      <article-title>The Kopernikus ENSURE co-demonstration platform</article-title>
      <source>IEEE Open Journal of Power Electronics</source>
      <year iso-8601-date="2023">2023</year>
      <volume>4</volume>
      <pub-id pub-id-type="doi">10.1109/OJPEL.2023.3332515</pub-id>
      <fpage>987</fpage>
      <lpage>1002</lpage>
    </element-citation>
  </ref>
  <ref id="ref-Bach2025">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Bach</surname><given-names>Alexandra</given-names></name>
        <name><surname>Monti</surname><given-names>Antonello</given-names></name>
      </person-group>
      <article-title>Remote real-time testing of physical components using communication setup automation</article-title>
      <source>IEEE Access</source>
      <year iso-8601-date="2025">2025</year>
      <volume>13</volume>
      <issue></issue>
      <pub-id pub-id-type="doi">10.1109/ACCESS.2025.3546311</pub-id>
      <fpage>39066</fpage>
      <lpage>39075</lpage>
    </element-citation>
  </ref>
</ref-list>
</back>
</article>
