<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE article PUBLIC "-//NLM//DTD JATS (Z39.96) Journal Publishing DTD v1.2 20190208//EN"
                  "JATS-publishing1.dtd">
<article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="1.2" article-type="other">
<front>
<journal-meta>
<journal-id></journal-id>
<journal-title-group>
<journal-title>Journal of Open Source Software</journal-title>
<abbrev-journal-title>JOSS</abbrev-journal-title>
</journal-title-group>
<issn publication-format="electronic">2475-9066</issn>
<publisher>
<publisher-name>Open Journals</publisher-name>
</publisher>
</journal-meta>
<article-meta>
<article-id pub-id-type="publisher-id">8120</article-id>
<article-id pub-id-type="doi">10.21105/joss.08120</article-id>
<title-group>
<article-title>simulacrumWorkflowR: An R package for Streamlined Access
and Analysis of the Simulacrum Cancer Dataset</article-title>
</title-group>
<contrib-group>
<contrib contrib-type="author">
<contrib-id contrib-id-type="orcid">https://orcid.org/0009-0006-8967-9268</contrib-id>
<name>
<surname>Skelmose</surname>
<given-names>Jakob</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
<xref ref-type="aff" rid="aff-2"/>
</contrib>
<contrib contrib-type="author">
<contrib-id contrib-id-type="orcid">https://orcid.org/0000-0002-3715-8528</contrib-id>
<name>
<surname>Nielsen</surname>
<given-names>Lars</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
</contrib>
<contrib contrib-type="author">
<contrib-id contrib-id-type="orcid">https://orcid.org/0000-0003-2750-9678</contrib-id>
<name>
<surname>Bartell</surname>
<given-names>Jennifer</given-names>
</name>
<xref ref-type="aff" rid="aff-2"/>
<xref ref-type="aff" rid="aff-3"/>
</contrib>
<contrib contrib-type="author">
<contrib-id contrib-id-type="orcid">https://orcid.org/0000-0003-2301-9081</contrib-id>
<name>
<surname>Vesteghem</surname>
<given-names>Charles</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
</contrib>
<contrib contrib-type="author">
<contrib-id contrib-id-type="orcid">https://orcid.org/0000-0001-9192-1814</contrib-id>
<name>
<surname>Bøgsted</surname>
<given-names>Martin</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
</contrib>
<contrib contrib-type="author">
<contrib-id contrib-id-type="orcid">https://orcid.org/0009-0000-7249-2196</contrib-id>
<name>
<surname>Jørgensen</surname>
<given-names>Rasmus Rask Kragh</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
<xref ref-type="aff" rid="aff-4"/>
</contrib>
<aff id="aff-1">
<institution-wrap>
<institution>Center for Clinical Data Science, Aalborg University,
Aalborg, Denmark</institution>
</institution-wrap>
</aff>
<aff id="aff-2">
<institution-wrap>
<institution>Health Data Science Sandbox, University of Copenhagen,
Copenhagen, Denmark</institution>
</institution-wrap>
</aff>
<aff id="aff-3">
<institution-wrap>
<institution>Center for Health Data Science, University of Copenhagen,
Copenhagen, Denmark</institution>
</institution-wrap>
</aff>
<aff id="aff-4">
<institution-wrap>
<institution>Department of Hematology, Aalborg University Hospital,
Aalborg, Denmark</institution>
</institution-wrap>
</aff>
</contrib-group>
<pub-date date-type="pub" publication-format="electronic" iso-8601-date="2025-02-27">
<day>27</day>
<month>2</month>
<year>2025</year>
</pub-date>
<volume>10</volume>
<issue>112</issue>
<fpage>8120</fpage>
<permissions>
<copyright-statement>Authors of papers retain copyright and release the
work under a Creative Commons Attribution 4.0 International License (CC
BY 4.0)</copyright-statement>
<copyright-year>2025</copyright-year>
<copyright-holder>The article authors</copyright-holder>
<license license-type="open-access" xlink:href="https://creativecommons.org/licenses/by/4.0/">
<license-p>Authors of papers retain copyright and release the work under
a Creative Commons Attribution 4.0 International License (CC BY
4.0)</license-p>
</license>
</permissions>
<kwd-group kwd-group-type="author">
<kwd>R</kwd>
<kwd>Simulacrum</kwd>
<kwd>Synthetic Data</kwd>
<kwd>Cancer Administration System</kwd>
</kwd-group>
</article-meta>
</front>
<body>
<sec id="summary">
  <title>Summary</title>
  <p>The simulacrumWorkflowR package addresses the technical barriers
  associated with utilizing the Simulacrum through a streamlined
  workflow for accessing, preprocessing, and planning statistical
  analyses on the Simulacrum dataset. Our aim is to improve
  accessibility for researchers and clinicians with limited database
  expertise. The main function of this package is the
  <monospace>create_workflow()</monospace> function, which creates an R
  script based on the user’s input that includes the necessary code for
  submission and execution on the United Kingdom’s Cancer Analysis
  System (CAS) database servers
  (<xref alt="Henson et al., 2020" rid="ref-henson2020data" ref-type="bibr">Henson
  et al., 2020</xref>).</p>
</sec>
<sec id="statement-of-need">
  <title>Statement of need</title>
  <p>CAS data, stored in a restricted access Oracle database
  (<xref alt="Oracle Corporation, 2025" rid="ref-oracle2025main" ref-type="bibr">Oracle
  Corporation, 2025</xref>), is held by the United Kingdom’s National
  Disease Registration Service (NDRS)
  (<xref alt="NDRS, 2023" rid="ref-national2023guide" ref-type="bibr">NDRS,
  2023</xref>). Researchers can analyze CAS data through assistance from
  NDRS staff and access to the Simulacrum,
  (<xref alt="HDI, 2025b" rid="ref-simulacrum2025main" ref-type="bibr">HDI,
  2025b</xref>) a synthetic version of the CAS database enabling the
  development and testing of SQL queries and analysis code. The latest
  version of the Simulacrum contains information about patient
  characteristics, tumor diagnosis, systematic anti-cancer treatment,
  radiotherapy, and genetic testing data
  (<xref alt="Frayling &amp; Jose, 2023" rid="ref-frayling2023simulacrum" ref-type="bibr">Frayling
  &amp; Jose, 2023</xref>). Scripts developed using the Simulacrum can
  be sent to NDRS for execution on the CAS database; a common analysis
  workflow involves querying the database directly from R, extracting
  data, and further processing it to produce analytical outputs (the R
  workflow). NDRS staff adjust the code (e.g., SQL queries need further
  processing by NDRS due to 1) structural differences between the
  Simulacrum and CAS, 2) non-public details/specifications of the CAS
  database and 3) code alignment with NDRS best practices), execute the
  code, assess aggregated outputs with respect to patient privacy and
  return these outputs. If this process takes less than 3 hours, it’s
  free of charge as of 2025. If the process is expected to take longer,
  the NDRS analyst may suggest simplifying the request or redirecting it
  to NHS England’s data release services (DARS). For complex or
  recurring requests involving analysis, one can contact United
  Kingdom’s Health Data Insight (HDI)
  (<xref alt="HDI, 2025a" rid="ref-hdi2025main" ref-type="bibr">HDI,
  2025a</xref>) for further assistance. HDI act as a specialized partner
  with the NDRS, who facilitate and executes the analysis on the CAS
  data as part of a collaborative framework
  (<xref alt="Kafatos et al., 2025" rid="ref-kafatos2025syndata" ref-type="bibr">Kafatos
  et al., 2025</xref>). Thus, a streamlined process requires providing
  easily adaptable and executable code. The advantages of utilizing the
  Simulacrum can be summarized as follows:</p>
  <list list-type="order">
    <list-item>
      <p>Accelerated research.</p>
    </list-item>
    <list-item>
      <p>Democratization of data.</p>
    </list-item>
    <list-item>
      <p>Improving Privacy.</p>
    </list-item>
  </list>
  <p>Accordingly, results from the Simulacrum should not be used to
  create real-world evidence - the dataset is intended for planning,
  designing, and testing analysis pipelines prior to generating
  actionable results with CAS data
  (<xref alt="Bullward et al., 2023" rid="ref-bullward2023research" ref-type="bibr">Bullward
  et al., 2023</xref>). The process of having workflows executed on the
  real data through the Simulacrum requires users to construct SQL
  queries for extracting data from the CAS database and R code for
  analysis. To write and test SQL queries using the Simulacrum, users
  must download CSV files, install a local Oracle database and configure
  ODBC connections
  (<xref alt="Microsoft, 2024" rid="ref-odbc2025main" ref-type="bibr">Microsoft,
  2024</xref>). SQL queries can then be executed from within an R script
  to extract data from the database for further analysis. Setting up a
  full Oracle database can be complex, particularly for new users. This
  presents a barrier to testing the full R workflow using the Simulacrum
  and may discourage users from doing so
  (<xref alt="NDRS, 2023" rid="ref-national2023guide" ref-type="bibr">NDRS,
  2023</xref>). The simulacrumWorkflowR package simplifies testing by
  removing the need to set up an Oracle database or configure ODBC
  connections. This allows users to create and test the full R workflow,
  including SQL queries that demonstrate the exact specification and
  form of the data required from the CAS database and how they integrate
  into the rest of the R script. This means NDRS can easily make the
  required adjustments before they are executed on the CAS database
  (Figure 1).
  <inline-graphic mimetype="image" mime-subtype="png" xlink:href="figure1_modified.drawio.png" /></p>
  <p>Figure 1: Flowchart of the process of running an analysis on the
  CAS Database using an R workflow tested on the Simulacrum and the
  process of running a similar analysis with the simulacrumWorkflowR
  package.</p>
  <p>The simulacrumWorkflowR package is, to our knowledge, the first
  package designed to enhance usability and provide a complete workflow
  for utilizing the Simulacrum datasets to facilitate access and
  execution of code for analysis on the CAS database.</p>
</sec>
<sec id="key-functionalities">
  <title>Key functionalities</title>
  <p>The package provides a streamlined setup for building the workflow
  in R. The package includes:</p>
  <list list-type="order">
    <list-item>
      <p><bold>Integrated SQL Environment:</bold> Leverages the sqldf
      (<xref alt="Grothendieck, 2017" rid="ref-grothendieck2017sqldf" ref-type="bibr">Grothendieck,
      2017</xref>) package to enable SQL queries directly within R,
      eliminating the need to set up an external database and ODBC
      connections by creating a local temporary SQLite database
      (<xref alt="SQLite, 2025" rid="ref-sqlite2025main" ref-type="bibr">SQLite,
      2025</xref>) within the R environment.</p>
    </list-item>
    <list-item>
      <p><bold>Query Helper:</bold> Offers a collection of queries
      custom-made for the Simulacrum dataset for pulling and merging
      specific tables. Additionally, the
      <monospace>sqlite2oracle</monospace> function assists in
      translating queries to be compatible with the CAS database
      servers.</p>
    </list-item>
    <list-item>
      <p><bold>Helper Tools:</bold> Offers a range of data preprocessing
      functions for cleaning and preparing the data for analysis,
      ensuring data quality, and consistency. Key functions include
      cancer type grouping, survival outcomes, and logging reports.</p>
    </list-item>
    <list-item>
      <p><bold>Workflow Generator:</bold> Generates an R script with the
      complete workflow. This ensures correct layout and the ability to
      integrate the necessary code to obtain a workflow suitable for
      submission to NDRS and execution on the CAS database.</p>
    </list-item>
  </list>
</sec>
<sec id="limitations">
  <title>Limitations</title>
  <p>The Simulacrum Version: The newest version of the Simulacrum
  (v2.1.0) is required for implementing the workflow on the CAS database
  because it resembles the CAS database more closely than earlier
  versions. Thus, the functionalities of this package are built for the
  Simulacrum v2.1.0, which means that some functions will not support
  earlier versions of the Simulacrum.</p>
  <p>Data Differences:</p>
  <list list-type="bullet">
    <list-item>
      <p>Coverage: The Simulacrum reflects diagnoses from 2016–2019,
      while CAS includes records dating back to 1971. The 2016-2019
      restriction needs to be added to the code for running on CAS, as
      this time period is only provided in the free tier. Periods of the
      CAS data extending beyond The Simulacrum v2.1.0 will required a
      formal data release request and a cost estimate provided by DARS
      given the scope of data needed.</p>
    </list-item>
    <list-item>
      <p>Structure: The Simulacrum has a simplified structure for ease
      of use, but this differs from the evolving CAS database.
      Adjustment by NDRS is likely before execution on CAS.</p>
    </list-item>
  </list>
  <p>The Simulacrum, being a snapshot of a limited period and a
  simplified structure, inherently has structural and coverage
  limitations. This is because it is derived from a rather dynamic and
  complex original dataset. Despite these limitations, the Simulacrum
  offers a well-balanced, comprehensive, yet user-friendly test
  dataset.</p>
  <p>SQLite: While both Oracle and SQLite use SQL syntax, there are
  notable differences between their syntaxes. For example, SQLite uses
  ‘LIMIT’ while Oracle uses ‘ROWNUM’. The sqldf package’s implementation
  also restricts table creation capabilities within SQLite. Adjustment
  by NDRS is likely before execution on CAS.</p>
  <p>Time Management: While the Simulacrum facilitates SQL query
  testing, the manual code adjustments required by NDRS are an
  additional time factor that is unaccounted for in the estimates
  provided by simulacrumWorkflowR. Despite this limitation, the package
  remains useful for benchmarking other components of the R script and
  identifying performance bottlenecks.</p>
</sec>
<sec id="acknowledgements">
  <title>Acknowledgements</title>
  <p>Jakob Skelmose and Jennifer Bartell acknowledge funding by the Novo
  Nordisk Fonden (NNF20OC0063268) via the Health Data Science Sandbox
  (https://hds-sandbox.github.io). Martin Bøgsted and Rasmus Rask Kragh
  Jørgensen acknowledge funding by the Novo Nordisk Fonden
  (NNF23OC0083510) via the SE3D project (Synthetic health data: ethical
  deployment and dissemination via deep learning approaches). We greatly
  appreciate the feedback we received from Lora Frayling at Health Data
  Insight.</p>
</sec>
</body>
<back>
<ref-list>
  <title></title>
  <ref id="ref-bullward2023research">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Bullward</surname><given-names>A</given-names></name>
        <name><surname>Aljebreen</surname><given-names>A</given-names></name>
        <name><surname>Coles</surname><given-names>A</given-names></name>
        <name><surname>Mclnerney</surname><given-names>C</given-names></name>
        <name><surname>Johnson</surname><given-names>O</given-names></name>
      </person-group>
      <article-title>Research paper: Process Mining and Synthetic health data: Reflections and lessons learnt</article-title>
      <person-group person-group-type="editor">
        <name><surname>Montali</surname><given-names>M</given-names></name>
        <name><surname>Senderovich</surname><given-names>A</given-names></name>
        <name><surname>Weidlich</surname><given-names>M</given-names></name>
      </person-group>
      <publisher-name>Springer</publisher-name>
      <publisher-loc>Cham</publisher-loc>
      <year iso-8601-date="2023">2023</year>
      <volume>468</volume>
      <pub-id pub-id-type="doi">10.1007/978-3-031-27815-0_25</pub-id>
    </element-citation>
  </ref>
  <ref id="ref-grothendieck2017sqldf">
    <element-citation publication-type="book">
      <person-group person-group-type="author">
        <name><surname>Grothendieck</surname><given-names>G</given-names></name>
      </person-group>
      <source>sqldf: Manipulate R data frames using SQL</source>
      <year iso-8601-date="2017">2017</year>
      <uri>https://CRAN.R-project.org/package=sqldf</uri>
    </element-citation>
  </ref>
  <ref id="ref-frayling2023simulacrum">
    <element-citation publication-type="book">
      <person-group person-group-type="author">
        <name><surname>Frayling</surname><given-names>L</given-names></name>
        <name><surname>Jose</surname><given-names>S</given-names></name>
      </person-group>
      <source>Simulacrum v2 user guide</source>
      <publisher-name>Health Data Insight</publisher-name>
      <year iso-8601-date="2023">2023</year>
    </element-citation>
  </ref>
  <ref id="ref-henson2020data">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Henson</surname><given-names>Katherine E</given-names></name>
        <name><surname>Elliss-Brookes</surname><given-names>Lucy</given-names></name>
        <name><surname>Coupland</surname><given-names>Victoria H</given-names></name>
        <name><surname>Payne</surname><given-names>Elsita</given-names></name>
        <name><surname>Vernon</surname><given-names>Sally</given-names></name>
        <name><surname>Rous</surname><given-names>Brian</given-names></name>
        <name><surname>Rashbass</surname><given-names>Jem</given-names></name>
      </person-group>
      <article-title>Data resource profile: National cancer registration dataset in England</article-title>
      <source>International Journal of Epidemiology</source>
      <year iso-8601-date="2020-02">2020</year><month>02</month>
      <volume>49</volume>
      <pub-id pub-id-type="doi">10.1093/ije/dyz076</pub-id>
      <fpage>16</fpage>
      <lpage>16h</lpage>
    </element-citation>
  </ref>
  <ref id="ref-hdi2025main">
    <element-citation>
      <person-group person-group-type="author">
        <name><surname>HDI</surname></name>
      </person-group>
      <article-title>Health data insight CIC (HDI)</article-title>
      <publisher-name>https://healthdatainsight.org.uk/</publisher-name>
      <year iso-8601-date="2025-05">2025</year><month>05</month>
    </element-citation>
  </ref>
  <ref id="ref-kafatos2025syndata">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Kafatos</surname><given-names>George</given-names></name>
        <name><surname>Levy</surname><given-names>Julia</given-names></name>
        <name><surname>Jose</surname><given-names>Sophie</given-names></name>
        <name><surname>Frayling</surname><given-names>Lora</given-names></name>
        <name><surname>McInerney</surname><given-names>Christopher J.</given-names></name>
        <name><surname>Moore</surname><given-names>George</given-names></name>
        <name><surname>Johnson</surname><given-names>Owen</given-names></name>
        <name><surname>Rashbass</surname><given-names>Jem</given-names></name>
        <name><surname>Rous</surname><given-names>Brian</given-names></name>
      </person-group>
      <article-title>Leveraging synthetic data to facilitate research: A collaborative model for analyzing sensitive national cancer registry data in England</article-title>
      <source>Therapeutic Innovation &amp; Regulatory Science</source>
      <year iso-8601-date="2025-06">2025</year><month>06</month>
      <pub-id pub-id-type="doi">10.1007/s43441-025-00820-z</pub-id>
    </element-citation>
  </ref>
  <ref id="ref-national2023guide">
    <element-citation publication-type="book">
      <person-group person-group-type="author">
        <name><surname>NDRS</surname></name>
      </person-group>
      <source>Guide to using the Simulacrum to support NDRS data requests</source>
      <publisher-name>National Disease Registration Service (NDRS)</publisher-name>
      <year iso-8601-date="2023">2023</year>
    </element-citation>
  </ref>
  <ref id="ref-odbc2025main">
    <element-citation publication-type="webpage">
      <person-group person-group-type="author">
        <name><surname>Microsoft</surname></name>
      </person-group>
      <article-title>Microsoft Open Database Connectivity (ODBC)</article-title>
      <year iso-8601-date="2024">2024</year>
      <date-in-citation content-type="access-date"><year iso-8601-date="2025-05-26">2025</year><month>05</month><day>26</day></date-in-citation>
      <uri>https://learn.microsoft.com/en-us/sql/odbc/microsoft-open-database-connectivity-odbc?view=sql-server-ver17</uri>
    </element-citation>
  </ref>
  <ref id="ref-oracle2025main">
    <element-citation publication-type="webpage">
      <person-group person-group-type="author">
        <string-name>Oracle Corporation</string-name>
      </person-group>
      <article-title>Oracle</article-title>
      <year iso-8601-date="2025">2025</year>
      <date-in-citation content-type="access-date"><year iso-8601-date="2025-05-26">2025</year><month>05</month><day>26</day></date-in-citation>
      <uri>https://www.oracle.com/</uri>
    </element-citation>
  </ref>
  <ref id="ref-simulacrum2025main">
    <element-citation>
      <person-group person-group-type="author">
        <name><surname>HDI</surname></name>
      </person-group>
      <article-title>Simulacrum: Artificial patient-like cancer data to help researchers gain insights</article-title>
      <publisher-name>https://simulacrum.healthdatainsight.org.uk/</publisher-name>
      <year iso-8601-date="2025-05">2025</year><month>05</month>
    </element-citation>
  </ref>
  <ref id="ref-sqlite2025main">
    <element-citation publication-type="webpage">
      <person-group person-group-type="author">
        <name><surname>SQLite</surname></name>
      </person-group>
      <article-title>SQLite</article-title>
      <year iso-8601-date="2025">2025</year>
      <date-in-citation content-type="access-date"><year iso-8601-date="2025-05-26">2025</year><month>05</month><day>26</day></date-in-citation>
      <uri>https://www.sqlite.org/</uri>
    </element-citation>
  </ref>
</ref-list>
</back>
</article>
