<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE article PUBLIC "-//NLM//DTD JATS (Z39.96) Journal Publishing DTD v1.2 20190208//EN"
                  "JATS-publishing1.dtd">
<article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="1.2" article-type="other">
<front>
<journal-meta>
<journal-id></journal-id>
<journal-title-group>
<journal-title>Journal of Open Source Software</journal-title>
<abbrev-journal-title>JOSS</abbrev-journal-title>
</journal-title-group>
<issn publication-format="electronic">2475-9066</issn>
<publisher>
<publisher-name>Open Journals</publisher-name>
</publisher>
</journal-meta>
<article-meta>
<article-id pub-id-type="publisher-id">4261</article-id>
<article-id pub-id-type="doi">10.21105/joss.04261</article-id>
<title-group>
<article-title>CESAR-P: A dynamic urban building energy simulation
tool</article-title>
</title-group>
<contrib-group>
<contrib contrib-type="author" corresp="yes">
<contrib-id contrib-id-type="orcid">0000-0001-6491-7641</contrib-id>
<name>
<surname>Orehounig</surname>
<given-names>Kristina</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
<xref ref-type="corresp" rid="cor-1"><sup>*</sup></xref>
</contrib>
<contrib contrib-type="author">
<contrib-id contrib-id-type="orcid">0000-0002-1457-537X</contrib-id>
<name>
<surname>Fierz</surname>
<given-names>Leonie</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
</contrib>
<contrib contrib-type="author">
<name>
<surname>Allan</surname>
<given-names>James</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
</contrib>
<contrib contrib-type="author">
<contrib-id contrib-id-type="orcid">0000-0003-3655-2328</contrib-id>
<name>
<surname>Eggimann</surname>
<given-names>Sven</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
</contrib>
<contrib contrib-type="author">
<name>
<surname>Vulic</surname>
<given-names>Natasa</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
</contrib>
<contrib contrib-type="author">
<name>
<surname>Bojarski</surname>
<given-names>Aaron</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
</contrib>
<aff id="aff-1">
<institution-wrap>
<institution>Urban Energy Systems Laboratory, Empa, Duebendorf,
Switzerland</institution>
</institution-wrap>
</aff>
</contrib-group>
<author-notes>
<corresp id="cor-1">* E-mail: <email></email></corresp>
</author-notes>
<pub-date date-type="pub" publication-format="electronic" iso-8601-date="2022-07-10">
<day>10</day>
<month>7</month>
<year>2022</year>
</pub-date>
<volume>7</volume>
<issue>78</issue>
<fpage>4261</fpage>
<permissions>
<copyright-statement>Authors of papers retain copyright and release the
work under a Creative Commons Attribution 4.0 International License (CC
BY 4.0)</copyright-statement>
<copyright-year>2022</copyright-year>
<copyright-holder>The article authors</copyright-holder>
<license license-type="open-access" xlink:href="https://creativecommons.org/licenses/by/4.0/">
<license-p>Authors of papers retain copyright and release the work under
a Creative Commons Attribution 4.0 International License (CC BY
4.0)</license-p>
</license>
</permissions>
<kwd-group kwd-group-type="author">
<kwd>Python</kwd>
<kwd>buildings</kwd>
<kwd>energy consumption</kwd>
<kwd>cities</kwd>
<kwd>retrofitting solutions</kwd>
<kwd>costs and emissions</kwd>
</kwd-group>
</article-meta>
</front>
<body>
<sec id="summary">
  <title>Summary</title>
  <p>Buildings are responsible for a large share of energy consumption
  and carbon dioxide emissions. With the challenge of reducing energy
  consumption and integrating renewable energy sources in buildings and
  neighbourhoods, an understanding of energy consumption patterns is
  needed at different temporal and spatial scales. CESAR-P (Combined
  Energy Simulation And Retrofitting - Python) is a bottom-up building
  stock modelling software to evaluate energy consumption and
  retrofitting strategies for individual buildings and neighbourhoods.
  CESAR-P is used to parameterize models for the dynamic building energy
  simulation tool EnergyPlus
  (<xref alt="Crawley et al., 2001" rid="ref-CRAWLEY_ET_AL_2001" ref-type="bibr">Crawley
  et al., 2001</xref>). It computes hourly energy demand profiles and
  indoor temperatures at the building level and takes into account
  shading and reflections of surrounding buildings. After the current
  energy demand is computed, retrofitting measures for individual
  buildings can be evaluated in terms of energy savings, embodied
  emissions and costs. The default library of CESAR-P is based on Swiss
  archetypal buildings created from standards and statistics about the
  Swiss building stock; however, users are able to define their own
  constructions and internal conditions for their buildings. CESAR-P is
  written in Python and is a further development of the tool CESAR
  (<xref alt="Wang et al., 2018" rid="ref-WANG_ET_AL_2018" ref-type="bibr">Wang
  et al., 2018</xref>). The building model generator of CESAR-P creates
  EnergyPlus input data files (.IDF) for each building within a
  specified extent, and can process geo-referenced input data as
  shapefiles (ESRI .shp format) for geometry. Building usage type and
  construction information is used to populate the building model. The
  EnergyPlus files are executed with a weather file (EnergyPlus epw
  weather data format) of the geographic location which provides the
  necessary climatic context for the building. The results consist of a
  configurable set of yearly demand values and hourly resolved times
  series for each building from EnergyPlus and additional operational
  costs and emissions. The retrofit module can be used to modify the
  parameters of individual building models according to a specified
  retrofit strategy. Retrofit strategies specify the frequency of
  retrofits to the main building elements such as walls, windows and
  roofs across the building stock. The output of the retrofit module
  include, in addition to the above-mentioned operational indicators,
  costs and embodied emissions of retrofitting interventions. All
  simulation steps can also be run in parallel on multiple cores. The
  code is platform-independent and is tested to run on Linux and
  Windows. The source code for CESAR-P has been archived to Zenodo
  (<xref alt="Fierz et al., 2021" rid="ref-cesar-p-zenodo" ref-type="bibr">Fierz
  et al., 2021</xref>)</p>
</sec>
<sec id="statement-of-need-and-key-features">
  <title>Statement of need and Key features</title>
  <p>Building energy simulation is used to generate the expected energy
  demand profiles of buildings. Building energy demand profiles are
  useful for planners to evaluate current performance and investigate
  how buildings will perform under different scenarios (e.g. building
  retrofits, changing climate). Building energy simulation is an
  important tool for decision making becasue monitored energy demands
  are often unavailable. Urban building energy modelling (UBEM) has been
  established in recent years to support the implementation of energy
  conservation measures and the integration of renewable energy
  technologies at city and district scale. UBEM tools can be classified
  as taking a top-down or a bottom-up modelling approach. Top-down
  approaches rely on aggregated data and different drivers
  (e.g. socio-economic indicators or climate data), whereas bottom-up
  modelling approaches are based on data at an individual building scale
  and include either statistical or engineering based modelling
  techniques to compute energy demand data of a set of individual
  buildings
  (<xref alt="Johari et al., 2020" rid="ref-JOHARI_ET_AL_2020" ref-type="bibr">Johari
  et al., 2020</xref>). Various review papers summarize available tools,
  including their key-features and limitations
  (<xref alt="Johari et al., 2020" rid="ref-JOHARI_ET_AL_2020" ref-type="bibr">Johari
  et al., 2020</xref>). The CESAR-P software, presented in this paper,
  falls within the category of bottom-up modelling approaches. CESAR-P
  uses EnergyPlus as the simulation engine, an open-source building
  energy simulation software that is widely-used in both academia and
  industry. CESAR-P simplifies the creation of EnergyPlus input files
  using a set of key parameters which are stored in archetypes. The
  target audience of the software are energy planners, energy utilities,
  cities and researchers. The time-resolved energy demand profile of
  buildings simulated by CESAR-P are crucial for evaluating renewable
  energy integration and retrofit strategies. CESAR-P can be used for
  spatial scales ranging from the building to the neighbourhood and city
  scale. Key features of CESAR-P include:</p>
  <list list-type="bullet">
    <list-item>
      <p>Modelling of indoor temperatures, heating and cooling loads,
      domestic hot water consumption, electricity consumption, comfort
      parameters, operational costs and emissions, embodied emissions
      and investment costs of retrofitting solutions, and solar
      irradiance on external surfaces.</p>
    </list-item>
    <list-item>
      <p>Capability to automate extraction of building geometries from
      commonly used geometric file types (such as shapefiles),
      simplifying the generation of required input files.</p>
    </list-item>
    <list-item>
      <p>The archetypes used to parameterize the building models are
      stored as RDF triples (in TTL files). The triples contain ABox
      statements related to the construction properties defined by each
      archetype. The statements conform to classes and properties stored
      in the urban energy simulation ontology
      (<xref alt="Allan et al., 2021" rid="ref-ALLAN_ET_AL_2021" ref-type="bibr">Allan
      et al., 2021</xref>). By default, a construction archetype will be
      assigned to a building instance using the building age. The
      construction archetype contains all of the material layers in the
      floor, roof and external walls of the building. CESAR-P loads the
      archetype data directly from the provided TTL files, but it can be
      configured to access a graph database instance to query archetype
      data. The reason to store the source data using RDF is due to the
      growing number of UBEM studies. It has been found that it is
      challenging to track assumptions used in published studies. The
      use of semantic web technologies such as RDF enables the user to
      query the results and underlying data used to build the simulation
      inputs. The use of ontologies will enable the linking of concepts
      and data models used in other studies using TBox inferences.</p>
    </list-item>
    <list-item>
      <p>Evaluation of retrofitting options and strategies.</p>
    </list-item>
    <list-item>
      <p>Simulation and comparison of energy demand for scenarios with
      different building parametrization, for example to evaluate
      passive cooling potential
      (<xref alt="Silva et al., 2022" rid="ref-SILVA_ET_AL_2022" ref-type="bibr">Silva
      et al., 2022</xref>).</p>
    </list-item>
    <list-item>
      <p>Since CESAR-P uses EnergyPlus, which is a continually developed
      energy simulation tool within the research field, the capabilities
      of CESAR-P can be extended to accommodate future developments and
      improve modelling accuracy.</p>
    </list-item>
    <list-item>
      <p>The tool can be applied at various scales and can be used for
      predicting the energy consumption of a single building, of whole
      neighbourhoods with thousands of buildings
      ((<xref alt="Wang et al., 2018" rid="ref-WANG_ET_AL_2018" ref-type="bibr">Wang
      et al., 2018</xref>) or, in combination with clustering
      approaches, for calculating national building energy demands
      Eggimann et al.
      (<xref alt="2022" rid="ref-EGGIMANN_ET_AL_2022" ref-type="bibr">2022</xref>).</p>
    </list-item>
  </list>
</sec>
<sec id="example">
  <title>Example</title>
  <p>Following we are outlining how you set up a simulation with
  cesar-p-core library. The snippets are based on the
  <ext-link ext-link-type="uri" xlink:href="https://github.com/hues-platform/cesar-p-usage-examples/blob/master/advanced_examples/basic_cesar_usage.py">basic
  usage example</ext-link> in
  <ext-link ext-link-type="uri" xlink:href="https://github.com/hues-platform/cesar-p-usage-examples">cesar-p-usage-examples</ext-link>.</p>
  <p>The main API class of <monospace>cesar-p-core</monospace> library
  is the <monospace>SimulationManager</monospace>. On initialization of
  the class you need to pass the configuration and the output folder for
  your project. Additionally, a process wide instance of the unit
  registry (handling conversion of physical units) must be provided. A
  minimal code-snippet looks like:</p>
  <code language="python">import cesarp.common
from cesarp.manager.SimulationManager import SimulationManager

if __name__ == &quot;__main__&quot;:
    sim_manager = SimulationManager(base_output_path=&quot;results&quot;, 
                                    main_config=&quot;simple_main_config.yml&quot;,
                                    unit_reg=cesarp.common.init_unit_registry())
    sim_manager.run_all_steps()</code>
  <p>In the YAML configuration you need to define the input files of
  your project. Below is the minimal set of YAML configuration you need
  for any project. The code above refers to this file as
  <monospace>simple_main_config.yml</monospace>.</p>
  <preformat>MANAGER:
    SITE_VERTICES_FILE:
        PATH: &quot;SiteVertices.csv&quot;
    BLDG_FID_FILE:
        PATH: &quot;BuildingInformation.csv&quot;
        SEPARATOR: &quot;,&quot;
        LABELS:
            gis_fid: &quot;ORIG_FID&quot;
    BLDG_AGE_FILE:
        PATH: &quot;BuildingInformation.csv&quot;
    BLDG_TYPE_PER_BLDG_FILE:
        PATH: &quot;BuildingInformation.csv&quot;
    SINGLE_SITE:
        WEATHER_FILE: &quot;Zurich_2015.epw&quot;</preformat>
  <p>The <monospace>SiteVertices.csv</monospace> defines the footprints
  and height of all the buildings on your site.</p>
  <table-wrap>
    <table>
      <thead>
        <tr>
          <th>TARGET_FID</th>
          <th>POINT_X</th>
          <th>POINT_Y</th>
          <th>HEIGHT</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td>0</td>
          <td>0</td>
          <td>12.5</td>
        </tr>
        <tr>
          <td>1</td>
          <td>0</td>
          <td>0</td>
          <td>12.5</td>
        </tr>
        <tr>
          <td>1</td>
          <td>25</td>
          <td>0</td>
          <td>12.5</td>
        </tr>
        <tr>
          <td>1</td>
          <td>25</td>
          <td>0</td>
          <td>12.5</td>
        </tr>
        <tr>
          <td>1</td>
          <td>0</td>
          <td>0</td>
          <td>12.5</td>
        </tr>
        <tr>
          <td>2</td>
          <td>35</td>
          <td>0</td>
          <td>12.5</td>
        </tr>
        <tr>
          <td>2</td>
          <td>35</td>
          <td>0</td>
          <td>12.5</td>
        </tr>
        <tr>
          <td>2</td>
          <td>60</td>
          <td>0</td>
          <td>12.5</td>
        </tr>
        <tr>
          <td>2</td>
          <td>60</td>
          <td>0</td>
          <td>12.5</td>
        </tr>
        <tr>
          <td>2</td>
          <td>35</td>
          <td>0</td>
          <td>12.5</td>
        </tr>
        <tr>
          <td>…</td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
      </tbody>
    </table>
  </table-wrap>
  <p>The <monospace>BuildingInformation.csv</monospace> file defines the
  properties of the buildings. The configuration entry
  <monospace>BLDG_FID_FILE</monospace> requires the column
  <monospace>ORIG_FID</monospace>, entry
  <monospace>BLDG_TYPE_PER_BLDG_FILE</monospace> column
  <monospace>SIA2024BuildingType</monospace> and entry
  <monospace>BLDG_AGE_FILE</monospace> column
  <monospace>BuildingAge</monospace>. The example above includes a few
  more columns per building, which will be explained further down.
  Usually you will have one file defining all the properties of your
  buildings, but the configuration gives you the flexibility to point to
  separate files for the different building properties and also to map
  to custom column names to allow using input data files without
  pre-processing (see the sub-entries for
  <monospace>BLDG_FID_FILE</monospace>).</p>
  <table-wrap>
    <table>
      <colgroup>
        <col width="11%" />
        <col width="25%" />
        <col width="14%" />
        <col width="20%" />
        <col width="14%" />
        <col width="16%" />
      </colgroup>
      <thead>
        <tr>
          <th>ORIG_FID</th>
          <th>SIA2024BuildingType</th>
          <th>BuildingAge</th>
          <th>ECarrierHeating</th>
          <th>ECarrierDHW</th>
          <th>GlazingRatio</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td>MFH</td>
          <td>1900</td>
          <td>2</td>
          <td>2</td>
          <td>13</td>
        </tr>
        <tr>
          <td>2</td>
          <td>MFH</td>
          <td>1930</td>
          <td>2</td>
          <td>2</td>
          <td>16</td>
        </tr>
        <tr>
          <td>…</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td>8</td>
          <td>MFH</td>
          <td>2012</td>
          <td>2</td>
          <td>2</td>
          <td>30</td>
        </tr>
        <tr>
          <td>9</td>
          <td>MFH</td>
          <td>2015</td>
          <td>2</td>
          <td>2</td>
          <td>30</td>
        </tr>
      </tbody>
    </table>
  </table-wrap>
  <p>The last required input is the weather data in EnergyPlus epw
  format, in the example named
  <monospace>Zurich_2015.epw</monospace>.</p>
  <sec id="building-model-parametrization">
    <title>Building model parametrization</title>
    <p>The main source for constructional parameters are the archetype
    definitions (included in the library) and assigned by the age of a
    building. Operational parameters such as occupancy or loads from
    appliances are based on a Swiss norm (SIA2024). Additional
    parameters and constants can be set in the YMAL configuration. You
    find an overview of all the parameters you can customize in the YAML
    file
    <ext-link ext-link-type="uri" xlink:href="https://github.com/hues-platform/cesar-p-core/blob/master/cesar-p-config-overview.yaml">cesar-p-config-overview.yaml</ext-link>.
    You only need to overwrite the parameters you want to change in your
    project specific YAML configuration. The configuration entries
    should be placed under the correct category, while paying attention
    to the indentation. The example below overwrites the following
    properties:</p>
    <list list-type="bullet">
      <list-item>
        <p><monospace>RANDOM_CONSTRUCTIONS</monospace> if set to
        <monospace>True</monospace>, CESAR-P chooses randomly one of the
        available construction archetypes, if there are several matching
        the age class of the processed building.</p>
      </list-item>
      <list-item>
        <p><monospace>GLAZING_RATIO_PER_BLDG_FILE</monospace> by default
        the glazing ratio is defined by a lookup based on the age of the
        buildindg. If you have information of the glazing ratio per
        building, add this information e.g. to your
        <monospace>BuildingInformation.csv</monospace> under a column
        heading <monospace>GlazingRatio</monospace>.</p>
      </list-item>
      <list-item>
        <p><monospace>RADIUS</monospace> defines the radius around a
        building in which other buildings are simulated as shading
        objects</p>
      </list-item>
      <list-item>
        <p><monospace>MINIMAL_STORY_HEIGHT</monospace> defines the
        default minimum floor height to use. The number of floors is
        defined by the integer division of building height and
        MINIMAL_STORY_HEIGHT.</p>
      </list-item>
    </list>
    <p>Your YAML configuration including those parameters would look
    like:</p>
    <preformat>MANAGER:
    # here go first all the default parameters from above
    ....
    RANDOM_CONSTRUCTIONS: True
    GLAZING_RATIO_PER_BLDG_FILE:
        ACTIVE: True
        PATH: &quot;BuildingInformation.csv&quot;
GEOMETRY:
    NEIGHBOURHOOD:
        RADIUS: 50 # meter
MAIN_BLDG_SHAPE:
    MINIMAL_STORY_HEIGHT: 2.2 # meter</preformat>
    <p>If you need additional customization, you can plug in your own
    implementation for assignment of the constructional and operational
    parameters per building. See
    <ext-link ext-link-type="uri" xlink:href="https://github.com/hues-platform/cesar-p-usage-examples/tree/master/advanced_examples/custom_constr_archetype_mapping">custom_constr_archetype_mapping</ext-link>
    and
    <ext-link ext-link-type="uri" xlink:href="https://github.com/hues-platform/cesar-p-usage-examples/tree/master/advanced_examples/operation_params_per_floor">operation_params_per_floor</ext-link>,
    respectively, in
    <ext-link ext-link-type="uri" xlink:href="https://github.com/hues-platform/cesar-p-usage-examples">cesar-p-usage-examples
    repository</ext-link>.</p>
  </sec>
  <sec id="results">
    <title>Results</title>
    <p>The results consist of a set of parameters from EnergyPlus
    results in a table format, as absolute annual values and converted
    to specific per m2 values. Additionally you can choose to calculate
    operational emissions. For this, you need to specify the energy
    installation per building. In the configuration, point to the file
    containing the data and activate the feature:</p>
    <preformat>MANAGER:
    # here go first all the default parameters from above
    ...
    DO_CALC_OP_EMISSIONS_AND_COSTS: True
    BLDG_INSTALLATION_FILE:     
        PATH: &quot;../example_project_files/BuildingInformation.csv&quot;</preformat>
    <p>The reuqired columns in the linked file are
    <monospace>ECarrierHeating</monospace>,
    <monospace>ECarrierDHW</monospace> defining the number key of the
    energy source used for space heating and domestic hot water,
    respectively. The allowed options are defined in the enumeration
    <ext-link ext-link-type="uri" xlink:href="https://github.com/hues-platform/cesar-p-core/blob/master/src/cesarp/model/EnergySource.py">EnergySource</ext-link>.</p>
    <p>The table below is an extract of the
    <monospace>site_result_summary.csvy</monospace> showing most
    important annual results per building:</p>
    <table-wrap>
      <table>
        <colgroup>
          <col width="14%" />
          <col width="14%" />
          <col width="14%" />
          <col width="14%" />
          <col width="14%" />
          <col width="14%" />
          <col width="14%" />
        </colgroup>
        <thead>
          <tr>
            <th>Bldg</th>
            <th>Heating Annual specific</th>
            <th>DHW Annual specific</th>
            <th>Electricity Annual specific</th>
            <th>Cooling Annual specific</th>
            <th>Total PEN</th>
            <th>Total CO2</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td></td>
            <td>kWh/m2 /year</td>
            <td>kWh/m2 /year</td>
            <td>kWh/m2 /year</td>
            <td>kWh/m2 /year</td>
            <td>kWh/m2 /year</td>
            <td>Oileq * MJ/m2 /year</td>
          </tr>
          <tr>
            <td>1</td>
            <td>101</td>
            <td>18</td>
            <td>23</td>
            <td>0.9</td>
            <td>898</td>
            <td>49</td>
          </tr>
          <tr>
            <td>2</td>
            <td>113</td>
            <td>18</td>
            <td>23</td>
            <td>1.1</td>
            <td>963</td>
            <td>54</td>
          </tr>
          <tr>
            <td>…</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
    </table-wrap>
    <p>Full list of result values reported is shown in the table
    below:</p>
    <table-wrap>
      <table>
        <thead>
          <tr>
            <th>Variable</th>
            <th>Unit</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>EnergyPlus error level</td>
            <td>-</td>
          </tr>
          <tr>
            <td>Heating Annual</td>
            <td>kWh/year</td>
          </tr>
          <tr>
            <td>DHW Annual</td>
            <td>kWh/year</td>
          </tr>
          <tr>
            <td>Electricity Annual</td>
            <td>kWh/year</td>
          </tr>
          <tr>
            <td>Cooling Annual</td>
            <td>kWh/year</td>
          </tr>
          <tr>
            <td>Heating Annual specific</td>
            <td>kWh/year/m2</td>
          </tr>
          <tr>
            <td>DHW Annual specific</td>
            <td>kWh/year/m2</td>
          </tr>
          <tr>
            <td>Electricity Annual specific</td>
            <td>kWh/year/m2</td>
          </tr>
          <tr>
            <td>Cooling Annual specific</td>
            <td>kWh/year/m2</td>
          </tr>
          <tr>
            <td>Total bldg floor area</td>
            <td>m2</td>
          </tr>
          <tr>
            <td>Total PEN</td>
            <td>Oileq * MJ/m2/year</td>
          </tr>
          <tr>
            <td>PEN Heating</td>
            <td>Oileq * MJ/m2/year</td>
          </tr>
          <tr>
            <td>PEN DHW</td>
            <td>Oileq * MJ/m2/year</td>
          </tr>
          <tr>
            <td>PEN Elec</td>
            <td>Oileq * MJ/m2/year</td>
          </tr>
          <tr>
            <td>Total CO2</td>
            <td>CO2eq * kg/m2/year</td>
          </tr>
          <tr>
            <td>CO2 Heating</td>
            <td>CO2eq * kg/m2/year</td>
          </tr>
          <tr>
            <td>CO2 DHW</td>
            <td>CO2eq * kg/m2/year</td>
          </tr>
          <tr>
            <td>CO2 Elec</td>
            <td>CO2eq * kg/m2/year</td>
          </tr>
          <tr>
            <td>Heating - Fuel Costs</td>
            <td>CHF/year</td>
          </tr>
          <tr>
            <td>DHW - Fuel Costs</td>
            <td>CHF/year</td>
          </tr>
          <tr>
            <td>Electricity - Costs</td>
            <td>CHF/year</td>
          </tr>
          <tr>
            <td>Year used for lookup of cost factors</td>
            <td>-</td>
          </tr>
        </tbody>
      </table>
    </table-wrap>
    <p>It is a good practice to check the column
    <monospace>EnergyPlus error level</monospace> to make sure there are
    no errors or warnings from EnergyPlus simulation. If there are, the
    details of the error are provided in the
    <monospace>eplus_error_summary.err</monospace> file.</p>
    <p>In case the details about the building model geometry are
    desired, they are available in the
    <monospace>bldgs_infos_model_generation.csv</monospace> file. For
    example, one can find the number of stories and the resulting floor
    height of each building’s geometry, as well as information on the
    effective glazing ratio, which can differ from your setting in case
    there are many small walls not having space for a window.</p>
    <p>If hourly results are needed, adding the following line to the
    main script would output the domestic hot water and heating hourly
    values as a pandas data frame:</p>
    <p>Additional imports needed</p>
    <preformat>from cesarp.eplus_adapter.eplus_eso_results_handling 
    import RES_KEY_DHW_DEMAND, RES_KEY_HEATING_DEMAND
from cesarp.eplus_adapter.idf_strings import ResultsFrequency</preformat>
    <p>After the simulation run, you can qurey the results form your
    <monospace>SimulationManager</monospace> instance:</p>
    <preformat>hourly_demand = 
    sim_manager.collect_custom_results(
      result_keys=[RES_KEY_HEATING_DEMAND, RES_KEY_DHW_DEMAND],
      results_frequency=ResultsFrequency.HOURLY)</preformat>
  </sec>
  <sec id="retrofit">
    <title>Retrofit</title>
    <p>For retrofitting the general procedure is to first define a
    baseline simulation and then run on top one or more retrofit
    scenarios. There are two retrofit managers implemented, the basic
    <ext-link ext-link-type="uri" xlink:href="https://github.com/hues-platform/cesar-p-core/blob/master/src/cesarp/retrofit/all_bldgs/SimpleRetrofitManager.py">SimpleRetrofitManager</ext-link>
    and
    <ext-link ext-link-type="uri" xlink:href="https://github.com/hues-platform/cesar-p-core/blob/master/src/cesarp/retrofit/energy_perspective_2050/EnergyPerspective2050RetrofitManager.py">EnergyPerspective2050RetrofitManager</ext-link>,
    following more complex rules to decide on retrofit measures. These
    manager classes are used instead of the
    <monospace>SimulationManager</monospace> to run your simulations.
    One can also implement a custom retrofit manager that defines which
    retrofit measures are carried out on which buildings.</p>
    <p>A summary of the simulation results of each scenario is saved to
    <monospace>all_scenarios_result_summary.csvy</monospace>. As an
    example the table below shows a comparison of annual specific
    heating demand for three different scenarios,
    <monospace>orig</monospace> being the baseline, scenario
    <monospace>roof</monospace> where roof construction was retrofitted
    and <monospace>wall_win_groundf</monospace> where wall, windows and
    ground floor were retrofitted. Details about retrofit measures,
    costs and embodied emissions is available in
    <monospace>retrofit_log.csv</monospace> in each scenario result
    subfolder. Summarized figures out of those files are included in the
    table.</p>
    <table-wrap>
      <table>
        <colgroup>
          <col width="9%" />
          <col width="17%" />
          <col width="25%" />
          <col width="15%" />
          <col width="34%" />
        </colgroup>
        <thead>
          <tr>
            <th>Building</th>
            <th>Scenario</th>
            <th>Heating Annual specific</th>
            <th>Retrofit Costs</th>
            <th>Retrofit embodied CO2 emissions</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td></td>
            <td></td>
            <td>kWh/m2/year</td>
            <td>CHF</td>
            <td>CO2eq * kg</td>
          </tr>
          <tr>
            <td>1</td>
            <td>orig</td>
            <td>101</td>
            <td>-</td>
            <td>-</td>
          </tr>
          <tr>
            <td>1</td>
            <td>roof</td>
            <td>94</td>
            <td>150’000</td>
            <td>3’389</td>
          </tr>
          <tr>
            <td>1</td>
            <td>wall_win_groundf</td>
            <td>18</td>
            <td>334’077</td>
            <td>21’831</td>
          </tr>
          <tr>
            <td>2</td>
            <td>orig</td>
            <td>113</td>
            <td>-</td>
            <td>-</td>
          </tr>
          <tr>
            <td>2</td>
            <td>roof</td>
            <td>106</td>
            <td>150’000</td>
            <td>10’067</td>
          </tr>
          <tr>
            <td>2</td>
            <td>wall_win_groundf</td>
            <td>18</td>
            <td>349’065</td>
            <td>22’560</td>
          </tr>
        </tbody>
      </table>
    </table-wrap>
    <p>See the
    <ext-link ext-link-type="uri" xlink:href="https://github.com/hues-platform/cesar-p-usage-examples/blob/master/advanced_examples/retrofit_simple_example.py">retrofit
    example</ext-link> for more details.</p>
  </sec>
  <sec id="project-handling">
    <title>Project handling</title>
    <p>There are several features to simplify project management,
    including comparison between different simulation runs with changed
    parameters, re-loading existing projects to avoid re-generation of
    building models or simulating existing IDF files. To allow for
    exchanging or backing up projects, there is the option to save all
    input files including the constructions database in a ZIP file.
    Check out the
    <ext-link ext-link-type="uri" xlink:href="https://github.com/hues-platform/cesar-p-usage-examples/blob/master/advanced_examples/basic_cesar_usage.py">basic
    usage example</ext-link> to see those features in action.</p>
  </sec>
</sec>
<sec id="acknowledgements">
  <title>Acknowledgements</title>
  <p>The development of the software CESAR-P has been financially
  supported by SCCER FEEB&amp;D (CTI.1155000149) and by Empa. We
  acknowledge contributions from Danhong Wang, Jonas Landolt, Georgios
  Mavromatidis and Portia Murray to CESAR, the predecessor version of
  CESAR-P. Further we would like to acknowledge Ricardo Parreira da
  Silva for the implementation of passive cooling features.</p>
</sec>
</body>
<back>
<ref-list>
  <ref id="ref-WANG_ET_AL_2018">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Wang</surname><given-names>Danhong</given-names></name>
        <name><surname>Landolt</surname><given-names>Jonas</given-names></name>
        <name><surname>Mavromatidis</surname><given-names>Georgios</given-names></name>
        <name><surname>Orehounig</surname><given-names>Kristina</given-names></name>
        <name><surname>Carmeliet</surname><given-names>Jan</given-names></name>
      </person-group>
      <article-title>CESAR: A bottom-up building stock modelling tool for Switzerland to address sustainable energy transformation strategies</article-title>
      <source>Energy and Buildings</source>
      <year iso-8601-date="2018">2018</year>
      <volume>169</volume>
      <issn>0378-7788</issn>
      <uri>https://www.sciencedirect.com/science/article/pii/S0378778817337696</uri>
      <pub-id pub-id-type="doi">10.1016/j.enbuild.2018.03.020</pub-id>
      <fpage>9</fpage>
      <lpage>26</lpage>
    </element-citation>
  </ref>
  <ref id="ref-CRAWLEY_ET_AL_2001">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Crawley</surname><given-names>Drury B.</given-names></name>
        <name><surname>Lawrie</surname><given-names>Linda K.</given-names></name>
        <name><surname>Winkelmann</surname><given-names>Frederick C.</given-names></name>
        <name><surname>Buhl</surname><given-names>W. F.</given-names></name>
        <name><surname>Huang</surname><given-names>Y.Joe</given-names></name>
        <name><surname>Pedersen</surname><given-names>Curtis O.</given-names></name>
        <name><surname>Strand</surname><given-names>Richard K.</given-names></name>
        <name><surname>Liesen</surname><given-names>Richard J.</given-names></name>
        <name><surname>Fisher</surname><given-names>Daniel E.</given-names></name>
        <name><surname>Witte</surname><given-names>Michael J.</given-names></name>
        <name><surname>Glazer</surname><given-names>Jason</given-names></name>
      </person-group>
      <article-title>EnergyPlus: Creating a new-generation building energy simulation program</article-title>
      <source>Energy and Buildings</source>
      <year iso-8601-date="2001">2001</year>
      <volume>33</volume>
      <issue>4</issue>
      <issn>0378-7788</issn>
      <uri>https://www.sciencedirect.com/science/article/pii/S0378778800001146</uri>
      <pub-id pub-id-type="doi">10.1016/S0378-7788(00)00114-6</pub-id>
      <fpage>319</fpage>
      <lpage>331</lpage>
    </element-citation>
  </ref>
  <ref id="ref-EGGIMANN_ET_AL_2022">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Eggimann</surname><given-names>Sven</given-names></name>
        <name><surname>Vulic</surname><given-names>Natasa</given-names></name>
        <name><surname>Rüdisüli</surname><given-names>Martin</given-names></name>
        <name><surname>Mutschler</surname><given-names>Robin</given-names></name>
        <name><surname>Orehounig</surname><given-names>Kristina</given-names></name>
        <name><surname>Sulzer</surname><given-names>Matthias</given-names></name>
      </person-group>
      <article-title>Spatiotemporal upscaling errors of building stock clustering for energy demand simulation</article-title>
      <source>Energy and Buildings</source>
      <year iso-8601-date="2022">2022</year>
      <volume></volume>
      <issn>0378-7788</issn>
      <uri>https://www.sciencedirect.com/science/article/pii/S0378778822000159</uri>
      <pub-id pub-id-type="doi">10.1016/j.enbuild.2022.111844</pub-id>
      <fpage>111844</fpage>
      <lpage></lpage>
    </element-citation>
  </ref>
  <ref id="ref-SILVA_ET_AL_2022">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Silva</surname><given-names>Ricardo</given-names></name>
        <name><surname>Eggimann</surname><given-names>Sven</given-names></name>
        <name><surname>Fierz</surname><given-names>Léonie</given-names></name>
        <name><surname>Fiorentini</surname><given-names>Massimo</given-names></name>
        <name><surname>Orehounig</surname><given-names>Kristina</given-names></name>
        <name><surname>Baldini</surname><given-names>Luca</given-names></name>
      </person-group>
      <article-title>Opportunities for passive cooling to mitigate the impact of climate change in Switzerland</article-title>
      <source>Buildings and environment</source>
      <year iso-8601-date="2022">2022</year>
      <volume></volume>
      <issn>0360-1323</issn>
      <uri>https://doi.org/10.1016/j.buildenv.2021.108574</uri>
      <pub-id pub-id-type="doi">10.1016/j.buildenv.2021.108574</pub-id>
      <fpage>108574</fpage>
      <lpage></lpage>
    </element-citation>
  </ref>
  <ref id="ref-cesar-p-zenodo">
    <element-citation publication-type="book">
      <person-group person-group-type="author">
        <name><surname>Fierz</surname><given-names>Léonie</given-names></name>
        <name><surname>Bojarski</surname><given-names>Aaron</given-names></name>
        <name><surname>UrbanEnergySystemsLab</surname></name>
      </person-group>
      <source>Hues-platform/cesar-p-core</source>
      <publisher-name>Zenodo</publisher-name>
      <year iso-8601-date="2021-04">2021</year><month>04</month>
      <uri>https://doi.org/10.5281/zenodo.4682880</uri>
      <pub-id pub-id-type="doi">10.5281/zenodo.4682880</pub-id>
    </element-citation>
  </ref>
  <ref id="ref-ALLAN_ET_AL_2021">
    <element-citation publication-type="paper-conference">
      <person-group person-group-type="author">
        <name><surname>Allan</surname><given-names>James</given-names></name>
        <name><surname>Fierz</surname><given-names>Leonie</given-names></name>
        <name><surname>Bollinger</surname><given-names>Andrew</given-names></name>
        <name><surname>Orehounig</surname><given-names>Kristina</given-names></name>
      </person-group>
      <article-title>Linked data ontology for urban and national scale building energy modelling</article-title>
      <source>eSim conference proceedings</source>
      <year iso-8601-date="2021">2021</year>
      <uri>http://www.ibpsa.org/proceedings/eSimPapers/2021/Contribution_1148_final_a.pdf</uri>
    </element-citation>
  </ref>
  <ref id="ref-JOHARI_ET_AL_2020">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Johari</surname><given-names>F.</given-names></name>
        <name><surname>Peronato</surname><given-names>G.</given-names></name>
        <name><surname>Sadeghian</surname><given-names>P.</given-names></name>
        <name><surname>Zhao</surname><given-names>X.</given-names></name>
        <name><surname>Widen</surname><given-names>J.</given-names></name>
      </person-group>
      <article-title>Urban building energy modeling: State of the art and future prospects</article-title>
      <source>Renewable and Sustainable Energy Reviews</source>
      <year iso-8601-date="2020">2020</year>
      <volume>128</volume>
      <issn>1364-0321</issn>
      <uri>https://www.sciencedirect.com/science/article/pii/S1364032120301933</uri>
      <pub-id pub-id-type="doi">10.1016/j.rser.2020.109902</pub-id>
      <fpage>109902</fpage>
      <lpage></lpage>
    </element-citation>
  </ref>
  <ref id="ref-MURRAY_ET_AL_2020">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Murray</surname><given-names>Portia</given-names></name>
        <name><surname>Marquant</surname><given-names>Julien</given-names></name>
        <name><surname>Niffeler</surname><given-names>Mathias</given-names></name>
        <name><surname>Mavromatidis</surname><given-names>Georgios</given-names></name>
        <name><surname>Orehounig</surname><given-names>Kristina</given-names></name>
      </person-group>
      <article-title>Optimal transformation strategies for buildings, neighbourhoods and districts to reach CO2 emission reduction targets</article-title>
      <source>Energy and Buildings</source>
      <year iso-8601-date="2020">2020</year>
      <volume>207</volume>
      <issn>0378-7788</issn>
      <uri>https://www.sciencedirect.com/science/article/pii/S0378778819319486</uri>
      <pub-id pub-id-type="doi">10.1016/j.enbuild.2019.109569</pub-id>
      <fpage>109569</fpage>
      <lpage></lpage>
    </element-citation>
  </ref>
</ref-list>
</back>
</article>
