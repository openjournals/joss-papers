<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE article PUBLIC "-//NLM//DTD JATS (Z39.96) Journal Publishing DTD v1.2 20190208//EN"
                  "JATS-publishing1.dtd">
<article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="1.2" article-type="other">
<front>
<journal-meta>
<journal-id></journal-id>
<journal-title-group>
<journal-title>Journal of Open Source Software</journal-title>
<abbrev-journal-title>JOSS</abbrev-journal-title>
</journal-title-group>
<issn publication-format="electronic">2475-9066</issn>
<publisher>
<publisher-name>Open Journals</publisher-name>
</publisher>
</journal-meta>
<article-meta>
<article-id pub-id-type="publisher-id">7256</article-id>
<article-id pub-id-type="doi">10.21105/joss.07256</article-id>
<title-group>
<article-title>PDR: The Planetary Data Reader</article-title>
</title-group>
<contrib-group>
<contrib contrib-type="author">
<contrib-id contrib-id-type="orcid">https://orcid.org/0000-0001-6065-5461</contrib-id>
<name>
<surname>Brown</surname>
<given-names>Sierra</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
</contrib>
<contrib contrib-type="author">
<contrib-id contrib-id-type="orcid">https://orcid.org/0000-0002-7877-3148</contrib-id>
<name>
<surname>Clair</surname>
<given-names>Michael St.</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
</contrib>
<contrib contrib-type="author">
<contrib-id contrib-id-type="orcid">https://orcid.org/0000-0003-2732-3486</contrib-id>
<name>
<surname>Million</surname>
<given-names>Chase</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
</contrib>
<contrib contrib-type="author">
<contrib-id contrib-id-type="orcid">https://orcid.org/0009-0004-6071-5865</contrib-id>
<name>
<surname>Curtis</surname>
<given-names>Sabrina A.</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
</contrib>
<contrib contrib-type="author">
<contrib-id contrib-id-type="orcid">https://orcid.org/0000-0002-4088-1928</contrib-id>
<name>
<surname>Aye</surname>
<given-names>K.-Michael</given-names>
</name>
<xref ref-type="aff" rid="aff-2"/>
</contrib>
<contrib contrib-type="author">
<contrib-id contrib-id-type="orcid">https://orcid.org/0000-0003-3216-2963</contrib-id>
<name>
<surname>Weinberg</surname>
<given-names>Zack</given-names>
</name>
<xref ref-type="aff" rid="aff-1"/>
</contrib>
<aff id="aff-1">
<institution-wrap>
<institution>Million Concepts LLC</institution>
</institution-wrap>
</aff>
<aff id="aff-2">
<institution-wrap>
<institution>Institut für Geologische Wissenschaften, Freie Universität
Berlin</institution>
</institution-wrap>
</aff>
</contrib-group>
<pub-date date-type="pub" publication-format="electronic" iso-8601-date="2024-07-16">
<day>16</day>
<month>7</month>
<year>2024</year>
</pub-date>
<volume>9</volume>
<issue>102</issue>
<fpage>7256</fpage>
<permissions>
<copyright-statement>Authors of papers retain copyright and release the
work under a Creative Commons Attribution 4.0 International License (CC
BY 4.0)</copyright-statement>
<copyright-year>2022</copyright-year>
<copyright-holder>The article authors</copyright-holder>
<license license-type="open-access" xlink:href="https://creativecommons.org/licenses/by/4.0/">
<license-p>Authors of papers retain copyright and release the work under
a Creative Commons Attribution 4.0 International License (CC BY
4.0)</license-p>
</license>
</permissions>
<kwd-group kwd-group-type="author">
<kwd>Python</kwd>
<kwd>planetary science</kwd>
</kwd-group>
</article-meta>
</front>
<body>
<sec id="summary">
  <title>Summary</title>
  <p>The Planetary Data Reader, <monospace>pdr</monospace>, is an
  open-source Python-language package that reads data stored in
  planetary science formats and converts it into standard Python
  objects. It typically loads images as <monospace>ndarrays</monospace>,
  tables as Pandas <monospace>DataFrames</monospace>, and metadata and
  ancillary data as strings or dicts. <monospace>pdr</monospace>‘s
  interface is designed to be maximally accessible to the introductory
  Python user. To read a data file, a user must simply
  <monospace>import pdr</monospace>, then run
  <monospace>pdr.read(fn)</monospace>, where <monospace>fn</monospace>
  is the data file or a detached ’label’ (metadata) file associated with
  it. <monospace>pdr</monospace> will immediately load the product’s
  metadata, then lazily load data objects when referenced.</p>
  <p><monospace>pdr</monospace> reads data products held by the
  Planetary Data System (PDS) that follow either PDS3
  (<xref alt="Jet Propulsion Laboratory, 2009" rid="ref-PDS3" ref-type="bibr">Jet
  Propulsion Laboratory, 2009</xref>) or PDS4
  (<xref alt="Jet Propulsion Laboratory, 2024" rid="ref-PDS4" ref-type="bibr">Jet
  Propulsion Laboratory, 2024</xref>) standards – meaning that they have
  metadata labels that generally follow one of these two formats. (It
  also supports some common scientific interchange data formats that are
  not PDS, including FITS.) We knew from the outset that many products
  in the PDS were not fully standards-compliant, particularly those
  archived under PDS3; its holdings are extremely diverse and span over
  half a century. For this reason, we took a <bold>data-driven
  development</bold> approach rather than attempting to implement these
  standards to the letter. What this means in practice is that we built
  <monospace>pdr</monospace> around a core of extremely flexible
  heuristics that permit it to permissively accept and correctly handle
  many products that deviate from the standards.</p>
  <p>We have developed these heuristics through an iterative design
  process centered on examination of actually-existing data. We created
  manifests of the holdings of each of the PDS nodes, then used them to
  help identify ‘types’ of data and retrieve representative samples of
  each ‘type’ (the PDS holds hundreds of millions of files with a total
  data volume in the petabytes, so examining every file is
  impractical).</p>
  <p>When we examine a new type, we verify the correctness of
  <monospace>pdr</monospace>’s behavior across our sample of that type
  and make changes to <monospace>pdr</monospace> as necessary to support
  that type’s characteristics. We then add one or two individual
  products of that type to a data corpus we use for regression testing.
  This has permitted us to design software that conforms to planetary
  data rather than planetary data standards. Our methods for adding
  dataset support are further described in Kaufman et al.
  (<xref alt="2022" rid="ref-KaufmanU003A2022" ref-type="bibr">2022</xref>),
  and our testing toolchain can be found in Curtis et al.
  (<xref alt="2024" rid="ref-pdr-tests" ref-type="bibr">2024</xref>).</p>
  <p><monospace>pdr</monospace> is an affliate package of
  <monospace>planetarypy</monospace>
  (<xref alt="PlanetaryPy Technical Committee, 2024" rid="ref-planetarypy" ref-type="bibr">PlanetaryPy
  Technical Committee, 2024</xref>). It is available on the Python
  Package Index and <monospace>conda-forge</monospace>.</p>
</sec>
<sec id="statement-of-need">
  <title>Statement of need</title>
  <p><italic>Just accessing data</italic> is a major pain point for
  planetary scientists. Data archived under the PDS3 standards can be
  especially challenging due to inconsistent, specialized, or flatly
  incorrect formatting. While the newer PDS4 standards are significantly
  stricter, many of the holdings of the PDS have not yet been migrated
  to this standard. <monospace>pdr</monospace> can remove months of
  preparatory work, making it faster for scientists to get to core
  research tasks and making it much more practical for them to
  incorporate data sets they haven’t worked with previously into their
  research.</p>
  <p>The simplicity and consistency of <monospace>pdr</monospace>’s API,
  along with its speed and stability, make it ideal for use in automated
  data processing pipelines. <monospace>pdr</monospace> is currently
  used in a wide variety of planetary projects. These include the
  Perseverance rover’s Mastcam-Z tactical pipeline
  (<xref alt="St. Clair, Million, et al., 2023" rid="ref-StClairU003A2023" ref-type="bibr">St.
  Clair, Million, et al., 2023</xref>) and PDS3 to PDS4 migration
  pipelines for data from Clementine
  (<xref alt="St. Clair et al., 2021" rid="ref-Clementine" ref-type="bibr">St.
  Clair et al., 2021</xref>), Chandrayaan-1 M3
  (<xref alt="Pieters et al., 2021" rid="ref-M3" ref-type="bibr">Pieters
  et al., 2021</xref>), and the Viking Orbiter cameras
  (<xref alt="St. Clair, Brown, et al., 2023" rid="ref-Viking" ref-type="bibr">St.
  Clair, Brown, et al., 2023</xref>). Its fast metadata parsing features
  make it especially appealing for converting metadata standards across
  tens of millions of products. For example, <monospace>pdr</monospace>
  is able to parse metadata and load the image arrays for 100
  nominal-sized Mastcam-Z IOFs using their attached PDS3 labels in 1.5
  seconds and in 0.75 seconds to parse the metadata alone. More complex
  labels such as the New Horizons ALICE calibrated Jupyter PDS3 labels
  took <monospace>pdr</monospace> 1.7 seconds to parse metadata for 100
  files.</p>
</sec>
<sec id="other-packages">
  <title>Other packages</title>
  <p>There is a very wide variety of software intended to read data in
  planetary science formats. <monospace>pdr</monospace>’s most important
  distinctions are its emphasis on breadth, simplicity, and high
  compatibility with other tools. <monospace>pdr</monospace>
  incorporates some of this software, including
  <monospace>pds4_tools</monospace>
  (<xref alt="Small Bodies Node &amp; Nagdimunov, 2021" rid="ref-pds4_tools" ref-type="bibr">Small
  Bodies Node &amp; Nagdimunov, 2021</xref>) and
  <monospace>astropy.io.fits</monospace>
  (<xref alt="Astropy Developers, 2024" rid="ref-astropy" ref-type="bibr">Astropy
  Developers, 2024</xref>). <monospace>pdr</monospace> uses these
  packages to read, respectively, PDS4 and FITS files, converting their
  outputs into standard Python objects to provide users with a common
  interface regardless of file format.</p>
  <p>It is important to note that many pieces of software with narrower
  <italic>format</italic> scope than <monospace>pdr</monospace> have
  wider <italic>application</italic> scope. For instance, GDAL
  (<xref alt="Rouault et al., 2024" rid="ref-GDAL" ref-type="bibr">Rouault
  et al., 2024</xref>) and <monospace>rasterio</monospace>
  (<xref alt="Mapbox, 2024" rid="ref-rasterio" ref-type="bibr">Mapbox,
  2024</xref>) (which uses GDAL) read a narrower range of data and do
  not provide as consistent or straightforward an interface, but will
  deal with map projection transformations; <monospace>plio</monospace>
  (<xref alt="USGS Astrogeology, 2024" rid="ref-plio" ref-type="bibr">USGS
  Astrogeology, 2024</xref>) only reads data in a few formats, but is
  capable of applying instrument-specific metadata-parsing rules. Many
  of these tools also offer write capabilities, which
  <monospace>pdr</monospace> does not. Users who require write
  capabilities or subdomain-specific behaviors might find
  narrowly-focused tools more appropriate; they might also find
  <monospace>pdr</monospace> useful as a preprocessor for such
  tools.</p>
</sec>
<sec id="acknowledgements">
  <title>Acknowledgements</title>
  <p>The development of pdr is supported by NASA grant
  No. 80NSSC21K0885. We would like to thank the Planetary Data System
  (PDS) for their continued cooperation with this project.</p>
</sec>
</body>
<back>
<ref-list>
  <title></title>
  <ref id="ref-KaufmanU003A2022">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>Kaufman</surname><given-names>Sierra V.</given-names></name>
        <name><surname>Million</surname><given-names>Chase C.</given-names></name>
        <name><surname>St. Clair</surname><given-names>Michael A.</given-names></name>
      </person-group>
      <article-title>HOW WE’LL KNOW WE CAN READ ALL THE DATA IN THE PDS: A TESTING METHODOLOGY FOR THE PLANETARY DATA READER!!!</article-title>
      <source>53rd Lunar and Planetary Science Conference</source>
      <year iso-8601-date="2022">2022</year>
      <uri>https://www.hou.usra.edu/meetings/lpsc2022/pdf/1119.pdf</uri>
    </element-citation>
  </ref>
  <ref id="ref-pdr-tests">
    <element-citation>
      <person-group person-group-type="author">
        <name><surname>Curtis</surname><given-names>Sabrina A.</given-names></name>
        <name><surname>Brown</surname><given-names>Sierra V.</given-names></name>
        <name><surname>St. Clair</surname><given-names>Michael A.</given-names></name>
      </person-group>
      <article-title>Pdr-tests: The testing suite/toolchain for ‘pdr‘</article-title>
      <source>Github repository</source>
      <publisher-name>Github</publisher-name>
      <year iso-8601-date="2024">2024</year>
      <uri>https://github.com/MillionConcepts/pdr-tests</uri>
    </element-citation>
  </ref>
  <ref id="ref-PDS3">
    <element-citation>
      <person-group person-group-type="author">
        <string-name>Jet Propulsion Laboratory</string-name>
      </person-group>
      <article-title>Planetary Data System Standards Reference Version 3.8</article-title>
      <publisher-name>nasa</publisher-name>
      <year iso-8601-date="2009">2009</year>
      <uri>https://pds.nasa.gov/datastandards/pds3/standards/sr/
            StdRef_20090227_v3.8.pdf</uri>
    </element-citation>
  </ref>
  <ref id="ref-PDS4">
    <element-citation>
      <person-group person-group-type="author">
        <string-name>Jet Propulsion Laboratory</string-name>
      </person-group>
      <article-title>Planetary Data System Standards Reference Version 1.22.0</article-title>
      <publisher-name>nasa</publisher-name>
      <year iso-8601-date="2024">2024</year>
      <uri>https://pds.nasa.gov/datastandards/documents/sr/v1/
            StdRef_1.22.0.pdf</uri>
      <pub-id pub-id-type="doi">10.17189/2ass-x557</pub-id>
    </element-citation>
  </ref>
  <ref id="ref-Clementine">
    <element-citation>
      <person-group person-group-type="author">
        <name><surname>St. Clair</surname><given-names>Michael A.</given-names></name>
        <name><surname>Million</surname><given-names>Chase</given-names></name>
        <name><surname>Ianno</surname><given-names>Adam</given-names></name>
      </person-group>
      <article-title>Clementine Imaging Bundle</article-title>
      <publisher-name>NASA PDS: USGS Imaging Node</publisher-name>
      <year iso-8601-date="2021">2021</year>
      <pub-id pub-id-type="doi">10.17189/07q9-ph18</pub-id>
    </element-citation>
  </ref>
  <ref id="ref-Viking">
    <element-citation>
      <person-group person-group-type="author">
        <name><surname>St. Clair</surname><given-names>Michael A.</given-names></name>
        <name><surname>Brown</surname><given-names>Sierra</given-names></name>
        <name><surname>Million</surname><given-names>Chase</given-names></name>
      </person-group>
      <article-title>Viking Orbiter Imaging Bundle</article-title>
      <publisher-name>NASA PDS: USGS Imaging Node</publisher-name>
      <year iso-8601-date="2023">2023</year>
      <uri>https://d1nxexkqx2p6yf.cloudfront.net/PDS4/bundle.xml</uri>
    </element-citation>
  </ref>
  <ref id="ref-M3">
    <element-citation>
      <person-group person-group-type="author">
        <name><surname>Pieters</surname><given-names>C.</given-names></name>
        <name><surname>Lundee</surname><given-names>S.</given-names></name>
        <name><surname>Sunshine</surname><given-names>J</given-names></name>
      </person-group>
      <article-title>Chandrayaan-1 Orbiter Moon Mineralogy Mapper Collected Data Sets</article-title>
      <publisher-name>NASA PDS: USGS Imaging Node</publisher-name>
      <year iso-8601-date="2021">2021</year>
      <pub-id pub-id-type="doi">10.17189/f8xf-6a29</pub-id>
    </element-citation>
  </ref>
  <ref id="ref-planetarypy">
    <element-citation>
      <person-group person-group-type="author">
        <string-name>PlanetaryPy Technical Committee</string-name>
      </person-group>
      <article-title>Planetarypy</article-title>
      <year iso-8601-date="2024">2024</year>
      <uri>https://planetarypy.org/</uri>
    </element-citation>
  </ref>
  <ref id="ref-StClairU003A2023">
    <element-citation publication-type="article-journal">
      <person-group person-group-type="author">
        <name><surname>St. Clair</surname><given-names>Michael A.</given-names></name>
        <name><surname>Million</surname><given-names>Chase C.</given-names></name>
        <name><surname>Brown</surname><given-names>Sierra V.</given-names></name>
        <name><surname>Rice</surname><given-names>Melissa S.</given-names></name>
      </person-group>
      <article-title>Automated Spectral Image Processing Techniques in the Marslab Family of Applications</article-title>
      <source>6th Planetary Data Workshop</source>
      <year iso-8601-date="2023">2023</year>
      <uri>https://www.hou.usra.edu/meetings/planetdata2023/pdf/7050.pdf</uri>
    </element-citation>
  </ref>
  <ref id="ref-plio">
    <element-citation>
      <person-group person-group-type="author">
        <string-name>USGS Astrogeology</string-name>
      </person-group>
      <article-title>pilo: Planetary Input/Output</article-title>
      <source>Github repository</source>
      <publisher-name>Github</publisher-name>
      <year iso-8601-date="2024">2024</year>
      <uri>https://github.com/DOI-USGS/plio</uri>
    </element-citation>
  </ref>
  <ref id="ref-pds4_tools">
    <element-citation>
      <person-group person-group-type="author">
        <name><surname>Small Bodies Node</surname><given-names>PDS</given-names></name>
        <name><surname>Nagdimunov</surname><given-names>Lev</given-names></name>
      </person-group>
      <article-title>PDS4 Tools</article-title>
      <source>Github repository</source>
      <publisher-name>Github</publisher-name>
      <year iso-8601-date="2021">2021</year>
      <uri>https://github.com/Small-Bodies-Node/pds4_tools</uri>
    </element-citation>
  </ref>
  <ref id="ref-GDAL">
    <element-citation>
      <person-group person-group-type="author">
        <name><surname>Rouault</surname><given-names>Even</given-names></name>
        <name><surname>Warmerdam</surname><given-names>Frank</given-names></name>
        <name><surname>Schwehr</surname><given-names>Kurt</given-names></name>
        <name><surname>Kiselev</surname><given-names>Andrey</given-names></name>
        <name><surname>Butler</surname><given-names>Howard</given-names></name>
        <name><surname>Łoskot</surname><given-names>Mateusz</given-names></name>
        <name><surname>Szekeres</surname><given-names>Tamas</given-names></name>
        <name><surname>Tourigny</surname><given-names>Etienne</given-names></name>
        <name><surname>Landa</surname><given-names>Martin</given-names></name>
        <name><surname>Miara</surname><given-names>Idan</given-names></name>
        <name><surname>Elliston</surname><given-names>Ben</given-names></name>
        <name><surname>Chaitanya</surname><given-names>Kumar</given-names></name>
        <name><surname>Plesea</surname><given-names>Lucian</given-names></name>
        <name><surname>Morissette</surname><given-names>Daniel</given-names></name>
        <name><surname>Jolma</surname><given-names>Ari</given-names></name>
        <name><surname>Dawson</surname><given-names>Nyall</given-names></name>
        <name><surname>Baston</surname><given-names>Daniel</given-names></name>
        <name><surname>de Stigter</surname><given-names>Craig</given-names></name>
        <name><surname>Miura</surname><given-names>Hiroshi</given-names></name>
      </person-group>
      <article-title>GDAL: Geospatial Data Abstraction Library</article-title>
      <source>Github repository</source>
      <publisher-name>Github</publisher-name>
      <year iso-8601-date="2024">2024</year>
      <pub-id pub-id-type="doi">10.5281/zenodo.12545688</pub-id>
    </element-citation>
  </ref>
  <ref id="ref-astropy">
    <element-citation>
      <person-group person-group-type="author">
        <string-name>Astropy Developers</string-name>
      </person-group>
      <article-title>The Astropy Project</article-title>
      <source>Github repository</source>
      <publisher-name>Github</publisher-name>
      <year iso-8601-date="2024">2024</year>
      <uri>https://github.com/astropy/astropy</uri>
    </element-citation>
  </ref>
  <ref id="ref-rasterio">
    <element-citation>
      <person-group person-group-type="author">
        <name><surname>Mapbox</surname></name>
      </person-group>
      <article-title>Rasterio</article-title>
      <source>Github repository</source>
      <publisher-name>Github</publisher-name>
      <year iso-8601-date="2024">2024</year>
      <uri>https://github.com/rasterio/rasterio/tree/main</uri>
    </element-citation>
  </ref>
</ref-list>
</back>
</article>
